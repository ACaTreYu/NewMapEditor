# Requirements Archive: v2.2 Transparency & Performance

**Archived:** 2026-02-09
**Status:** SHIPPED

For current requirements, see `.planning/REQUIREMENTS.md`.

---

# Requirements: AC Map Editor

**Defined:** 2026-02-09
**Core Value:** The map editing experience should feel intuitive and professional

## v2.2 Requirements

Requirements for Performance Optimization milestone. App must feel responsive from launch.

### Render Performance

- [x] **PERF-01**: App renders idle at <1% CPU — no unnecessary work when user is not interacting
- [x] **PERF-02**: Animation loop only runs when animated tiles are visible on canvas
- [x] **PERF-03**: Canvas layers only redraw when their specific inputs change (not every animation tick)

### State Architecture

- [x] **PERF-04**: Store operations do not cause cascading re-renders across unrelated components
- [x] **PERF-05**: MapCanvas re-renders are scoped to changed data (tool state, viewport, animation independently)

### Startup Performance

- [x] **PERF-06**: Minimap tile color computation does not block the main thread

## Traceability

| Req | Phase | Plan | Status |
|-----|-------|------|--------|
| PERF-01 | 37 | 37-01 | Complete — conditional animation loop with Page Visibility API |
| PERF-02 | 37 | 37-01 | Complete — hasVisibleAnimatedTiles() checks all open documents |
| PERF-03 | 37 | 37-02 | Complete — animFrameRef decouples overlay, conditional animation effect |
| PERF-04 | 37 | 37-01 | Complete — granular per-field sync in 22 wrapper actions |
| PERF-05 | 37 | 37-02 | Complete — split mega-selector into 3 focused groups |
| PERF-06 | 37 | 37-03 | Complete — requestIdleCallback with 2s timeout fallback |

---

## Milestone Summary

**Shipped:** 6 of 6 requirements
**Adjusted:** None
**Dropped:** None

---
*Archived: 2026-02-09 as part of v2.2 milestone completion*
