# Milestone v3.2: Animated Game Objects & Farplane Toggle

**Status:** SHIPPED 2026-02-15
**Phases:** 68-69
**Total Plans:** 2

## Overview

Add animated spawn and warp variants to game object tools, fix downward conveyor animation bug, and add farplane color toggle for editing canvas. Plus ad-hoc fixes for warp encoding (always 0xFA), right conveyor animation, and farplane image rendering.

## Phases

### Phase 68: Animated Game Objects

**Goal**: Game object tools support animated spawn and animated warp variants with correct tile placement and animation rendering

**Depends on**: Phase 67 (v3.1 complete)

**Requirements**: ASPAWN-01, ASPAWN-02, ASPAWN-03, AWARP-01, AWARP-02, AWARP-03, AWARP-04

**Success Criteria** (what must be TRUE):
  1. User can select "Animated Spawn" variant from spawn tool dropdown
  2. User can place animated spawn tile that cycles through 6 frames for selected team color (green: 870-875, red: 976-979/1016-1017, blue: 1099-1102/1139-1140, yellow: 1222-1225/1262-1263)
  3. User can select "Animated Warp" variant from warp tool dropdown
  4. User can place animated warp as 3x3 block centered on click position that cycles through 4 frames (top row: 1347-1358, middle row: 1387-1398, bottom row: 1427-1438)

**Plans:** 1 plan

Plans:
- [x] 68-01-PLAN.md -- Animated spawn/warp variants: state, placement, toolbar dropdowns, click offsets

### Phase 69: Conveyor Fix & Farplane Toggle

**Goal**: Downward conveyor animations work correctly and user can toggle farplane color rendering on/off

**Depends on**: Phase 68

**Requirements**: CFIX-01, FARP-01, FARP-02

**Success Criteria** (what must be TRUE):
  1. Downward conveyor tiles animate at the same speed and pattern as other conveyor directions
  2. User can toggle farplane color rendering on/off via UI control (checkbox or toggle button)
  3. Farplane toggle state persists during the editing session across tool switches and viewport changes

**Plans:** 1 plan

Plans:
- [x] 69-01-PLAN.md -- Fix downward conveyor animation + farplane toggle with toolbar button

---

## Milestone Summary

**Key Decisions:**
- Animated spawn places single tile (not 3x3 cross like static spawn)
- Animated warp places 3x3 block (BigWarp tiles 0x9A-0xA2)
- Warp encoding always uses 0xFA (only functional warp animation in-game)
- Farplane toggle uses full buffer rebuild pattern (clear prevTiles)
- Farplane renders from actual imgFarplane image, not solid black
- showFarplane cached per-frame to avoid getState() per tile (65536 calls)

**Issues Resolved:**
- Downward conveyor not animating (static tile IDs instead of animated encoding)
- Right conveyor not animating (same issue, ad-hoc fix)
- Warp encoding wrong (used WARP_STYLES array, only 0xFA works in-game)
- Farplane showing black instead of actual farplane image
- Map crash from calling getState() per tile in render loop

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- None

---

_For current project status, see .planning/ROADMAP.md_
