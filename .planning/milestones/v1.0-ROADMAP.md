# Milestone v1.0: UI Overhaul

**Status:** SHIPPED 2026-02-01
**Phases:** 1-3
**Total Plans:** 5

## Overview

This roadmap delivers a professional editor UI (horizontal toolbar, maximized canvas, tabbed bottom panel) while fixing critical bugs in the fill tool and animation system. Phases are ordered to fix core functionality first, then restructure layout, then add tabbed interface.

## Phases

### Phase 1: Bug Fixes

**Goal:** Core tools work correctly before UI restructuring begins.
**Depends on:** None
**Plans:** 2 plans

Plans:
- [x] 01-01-PLAN.md - Pattern fill with multi-tile selection support
- [x] 01-02-PLAN.md - Animation loading from Gfx.dll and timestamp-based rendering

**Requirements:**
- FIX-01: Pattern fill uses multi-tile selection (tiles/repeats across filled area)
- FIX-02: Animation panel displays correct frame data (not placeholders)
- FIX-03: Animated tiles show proper frames in map preview

**Success Criteria:**
1. User can select a 2x2 tile region in palette, use fill tool, and see pattern tile correctly across entire filled area
2. Animation panel displays actual frame data from loaded animation file (not hardcoded sequence)
3. Animated tiles on map cycle through correct frames at consistent speed

---

### Phase 2: Layout and Toolbar

**Goal:** Editor uses professional layout with horizontal toolbar and resizable panels.
**Depends on:** Phase 1
**Plans:** 2 plans

Plans:
- [x] 02-01-PLAN.md - Theme system and toolbar redesign with icon + label pattern
- [x] 02-02-PLAN.md - Resizable panel layout with react-resizable-panels

**Requirements:**
- LAYOUT-01: Horizontal toolbar positioned below native menu bar
- LAYOUT-02: Map canvas takes full width of window
- LAYOUT-03: Map canvas takes main vertical area (above bottom panel)
- LAYOUT-04: Bottom panel contains tabbed interface
- LAYOUT-05: Resizable divider between canvas and bottom panel
- LAYOUT-06: Divider freely draggable (~10-50% of window height)
- LAYOUT-07: Panel size persists between sessions
- TOOLBAR-01: Tool icons displayed in horizontal row
- TOOLBAR-02: Tooltips show tool name on hover
- TOOLBAR-03: Active tool has visual indicator (highlight/border)

**Success Criteria:**
1. User sees toolbar immediately below menu bar with tool icons in a horizontal row
2. Map canvas fills available width and dominates vertical space
3. User can drag divider between canvas and bottom panel, resize persists after app restart
4. Hovering tool icons shows tooltip with tool name; active tool is visually distinct

---

### Phase 3: Tabbed Bottom Panel

**Goal:** Bottom panel organizes tools into accessible tabs matching VS Code/Chrome convention.
**Depends on:** Phase 2
**Plans:** 1 plan

Plans:
- [x] 03-01-PLAN.md - TabbedBottomPanel component with ARIA-compliant tabs and keyboard navigation

**Requirements:**
- TABS-01: Tab bar at top of bottom panel
- TABS-02: Tiles tab showing tile palette
- TABS-03: Settings tab showing map settings
- TABS-04: Animations tab showing animation panel
- TABS-05: Active tab has clear visual indicator

**Success Criteria:**
1. User sees tab bar at top of bottom panel with Tiles, Settings, Animations tabs
2. Clicking each tab displays corresponding content (tile palette, map settings, animation panel)
3. Active tab is visually distinct; tabs are keyboard navigable (arrow keys)

---

## Milestone Summary

**Key Decisions:**
- Filter frame indices to 0-3999 range (valid tileset range, garbage data in Gfx.dll beyond actual frames)
- Deduplicate consecutive identical frames (detect single-frame animations that shouldn't cycle)
- Pattern fill anchored to click origin (consistent tiling regardless of fill direction)
- Dark theme as default (matches original app aesthetic)
- Single row toolbar layout (cleaner appearance without grouping dividers)
- Inset shadow + translateY for pressed effect (3D visual feedback for active tools)
- Panel IDs 'canvas' and 'bottom' for persistence (localStorage key-value persistence with object format)
- 40% min canvas, 10% min bottom constraints (canvas always dominates viewport)
- Tab order Tiles, Animations, Settings (tiles most frequently used)
- CSS hidden for tab content (preserves scroll position and component state)
- Automatic tab activation on arrow key (VS Code/Chrome convention)

**Issues Resolved:**
- Pattern fill now works with multi-tile selections
- Animation data loads correctly from Gfx.dll binary
- Non-animated tiles no longer incorrectly cycle (frame validation)

**Tech Debt Incurred:**
- CSS variable consistency: AnimationPanel.css, MapSettingsPanel.css, MapCanvas.css, StatusBar.css use hardcoded colors instead of CSS variables
- Pre-existing TypeScript path alias configuration mismatch (@components pattern)

---

_For current project status, see .planning/ROADMAP.md (created for next milestone)_

---
*Archived: 2026-02-01 as part of v1.0 milestone completion*
