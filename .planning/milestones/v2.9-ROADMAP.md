# Milestone v2.9: Measurement & Grid

**Status:** SHIPPED 2026-02-13
**Phases:** 56-60
**Total Plans:** 7

## Overview

Add ruler measurement tool with 4 modes (line, rectangle, path, radius), polish selection info display with status bar dimensions and floating labels, provide grid customization controls (opacity, weight, color), and center-on-selection viewport command.

## Phases

### Phase 56: Grid Customization
**Goal:** User can customize grid appearance with opacity, line weight, and color controls
**Depends on:** Phase 55 (Canvas Engine)
**Requirements:** GRID-01, GRID-02, GRID-03
**Plans:** 2 plans

Plans:
- [x] 56-01-PLAN.md — State + rendering + localStorage persistence (globalSlice, EditorState, MapCanvas)
- [x] 56-02-PLAN.md — Grid settings UI dropdown (ToolBar controls for opacity, weight, color)

**Completed:** 2026-02-13

### Phase 57: Selection Info Enhancement
**Goal:** User can see selection dimensions and tile count in status bar and as floating label
**Depends on:** Phase 56
**Requirements:** SEL-01, SEL-02
**Plans:** 1 plan

Plans:
- [x] 57-01-PLAN.md — Status bar tile count + floating canvas dimension label

**Completed:** 2026-02-13

### Phase 58: Ruler Tool — Line Mode
**Goal:** User can measure straight-line distance between two points in tiles
**Depends on:** Phase 57
**Requirements:** RULER-01
**Plans:** 1 plan

Plans:
- [x] 58-01-PLAN.md — Ruler tool infrastructure + drag behavior + visual overlay

**Completed:** 2026-02-13

### Phase 59: Ruler Tool — Advanced Modes
**Goal:** User can measure rectangular areas, multi-point paths, and radii
**Depends on:** Phase 58
**Requirements:** RULER-02, RULER-03, RULER-04, RULER-05
**Plans:** 2 plans

Plans:
- [x] 59-01-PLAN.md — RulerMode state infrastructure + rectangle mode + radius mode
- [x] 59-02-PLAN.md — Path mode + pin/lock feature + mode selector UI

**Completed:** 2026-02-13

### Phase 60: Center on Selection
**Goal:** User can center viewport on current selection with single command
**Depends on:** Phase 59
**Requirements:** GRID-04
**Plans:** 1 plan

Plans:
- [x] 60-01-PLAN.md — View menu + IPC handler + Ctrl+E keyboard shortcut for center on selection

**Completed:** 2026-02-13

---

## Milestone Summary

**Key Decisions:**
- Ctrl+E for center-on-selection (free, mnemonic, no conflict)
- Check-in-handler for menu enable/disable (matches File > Save pattern)
- innerHeight - 100 for viewport chrome offset (matches Minimap)
- Ref-based transient state for ruler drag (same pattern as line/rect tools)
- Inclusive tile counting for rectangle mode (+1 to width/height)
- Click-to-add interaction for path mode waypoints
- P key pins measurement, Escape clears all pinned
- Mode selector only visible when ruler tool active (contextual UI)

**Issues Resolved:**
- None — clean milestone with zero blockers

**Issues Deferred:**
- Ruler notepad panel (deferred to next milestone)
- Ruler angle display (RULER-06, future)
- Custom measurement scales (RULER-07, future)

**Technical Debt Incurred:**
- Duplicate centering math in App.tsx and ToolBar.tsx (could extract to utility)
- Unused variable warnings (immediatePatchTile, dirty) from prior phases

---
*For current project status, see .planning/ROADMAP.md*
