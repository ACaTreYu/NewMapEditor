# Milestone v1.2: SEdit-Style Layout

**Status:** SHIPPED 2026-02-02
**Phases:** 7-10
**Total Plans:** 9

## Overview

Restructured UI to match SEdit's layout with maximized canvas in Win95/98 window frame, minimap in top-right corner, animations panel on left side, tiles panel at bottom, plus comprehensive Map Settings dialog with 53 game settings.

## Phases

### Phase 7: SEdit Layout Foundation

**Goal**: Restructure UI with huge canvas as primary focus in bordered window frame
**Depends on**: Phase 6
**Plans**: 1 plan

Plans:
- [x] 07-01: Win95/98 window frame styling and layout restructure

**Details:**
- Added --workspace-bg CSS variable for classic Windows APPWORKSPACE gray
- Created .map-window-frame class with inset box-shadow for sunken panel effect
- Gray background visible around canvas frame
- Raised 3D divider styling for resize handles

### Phase 8: Minimap

**Goal**: Reposition existing minimap from bottom-left to top-right corner
**Depends on**: Phase 7
**Plans**: 1 plan

Plans:
- [x] 08-01: Reposition minimap to top-right corner (CSS change)

**Details:**
- Changed positioning from bottom-left to top-right with 8px margins
- Preserved all existing functionality (256x256 rendering, viewport indicator, click navigation)
- Simple CSS-only change, no JavaScript modifications

### Phase 9: Panel Redesign

**Goal**: Redesign animations panel (left side) and tiles panel (bottom) to match SEdit layout
**Depends on**: Phase 7
**Plans**: 4 plans

Plans:
- [x] 09-01: Nested panel layout with TilesetPanel and Win95 styling
- [x] 09-02: Animation panel redesign with 16x16 previews
- [x] 09-03: Compact toolbar and canvas selection preview
- [x] 09-04: Gap closure: dynamic tileset width and full height display

**Details:**
- Nested PanelGroup pattern (horizontal outer, vertical inner) for multi-directional layout
- TilesetPanel wrapper component with Win95 title bar
- 16x16 animation previews (was 48x48), displaying 20 animations at once vs 8
- Hover-based hex labels without leading zeros (D5 not 0D5)
- Icon-only compact toolbar with native tooltips
- Dashed white selection outline on canvas for multi-tile stamp alignment
- fullHeight prop for TilePalette enabling full tileset display
- Panel-level scrolling for oversized content

### Phase 10: Map Settings Dialog

**Goal**: Comprehensive Map Settings popup with tabbed interface for all 40+ game settings
**Depends on**: Phase 7
**Plans**: 3 plans

Plans:
- [x] 10-01: Dialog foundation: GameSettings types and Win95 dialog shell
- [x] 10-02: Tab content: SettingInput component and populated tabs
- [x] 10-03: Store integration: Apply/Close/Reset All and toolbar button

**Details:**
- GameSetting interface with key/label/min/max/default/category for complete metadata
- 53 settings across 10 tabs (Map, General, Laser, Missile, Bouncy, Grenade, Game, DHT, Flagger, Toggles)
- HTML5 dialog with forwardRef pattern for programmatic control
- Win95 property sheet tab styling with raised selected tab effect
- SettingInput component with synchronized slider+input+reset
- Dirty flag tracking with unsaved changes confirmation
- extendedSettings field in MapHeader for flexible custom settings storage
- Reset All button on left, Apply/Close on right (Windows convention)

---

## Milestone Summary

**Decimal Phases:**
None - all phases were planned from milestone start.

**Key Decisions:**

| Decision | Rationale |
|----------|-----------|
| Inset box-shadow for Win95/98 frame | Classic sunken panel effect using multiple shadow layers |
| --workspace-bg as separate variable | Independent theming of workspace vs panel backgrounds |
| Nested PanelGroup layout pattern | Horizontal outer splits left panel, vertical inner splits canvas/bottom |
| Always-visible panels (no collapse) | Matches SEdit behavior, simplifies UI |
| 16x16 animation previews | Actual tile size matches SEdit density |
| Hover-based hex labels | Reduces clutter, shows "D5" not "0D5" |
| Icon-only toolbar with native tooltips | Photoshop/GIMP-style compact UI maximizes canvas |
| fullHeight prop for TilePalette | Separate modes for TilesetPanel vs AnimationPanel |
| GameSetting interface with metadata | Complete spec for control rendering and validation |
| 10-tab category organization | Weapon types separated, matches AC spec grouping |
| HTML5 dialog with forwardRef | Native modal behavior, programmatic control |
| Win95 property sheet styling | Consistent with Phase 9 chrome aesthetic |
| Store integration via open() not mount | Fresh data when reopening after external changes |
| extendedSettings as Record<string, number> | Flexible storage without schema changes |

**Issues Resolved:**

- Tileset limited height display (09-04 gap closure)
- Tileset fixed width rendering (09-04 gap closure)
- Animation panel too sparse (09-02 compact redesign)
- Toolbar consuming too much horizontal space (09-03 icon-only)

**Issues Deferred:**

None - all requirements complete.

**Technical Debt Incurred:**

- Orphaned exports: MapSettingsPanel, TabbedBottomPanel, RightSidebar, AnimationPreview in components/index.ts

---

*For current project status, see .planning/ROADMAP.md*
