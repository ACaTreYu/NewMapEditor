# Milestone v2.4: MDI Window Controls

**Status:** SHIPPED 2026-02-10
**Phases:** 39-40
**Total Plans:** 2

## Overview

Add classic MDI window management with minimize, maximize, and restore controls for child map windows. Minimized windows appear as compact bars at workspace top. Maximized windows fill the entire workspace with hidden title bar for maximum canvas space. All button icons are CSS-drawn using pseudo-elements.

## Phases

### Phase 39: Minimize & Restore Controls

**Goal**: Child windows get full window management: minimize to compact bars, maximize to fill workspace, restore to previous state
**Depends on**: Phase 38
**Requirements**: CTRL-01, CTRL-02, CTRL-03, CTRL-04, CTRL-05, MINZ-01, MINZ-02, MINZ-03, MAXZ-01, MAXZ-02, MAXZ-03, MAXZ-04
**Plans:** 2 plans — Verified 17/17

Plans:

- [x] 39-01-PLAN.md — State foundation: WindowState extension + minimize/maximize/restore actions
- [x] 39-02-PLAN.md — UI: CSS-drawn title bar buttons, MinimizedBar component, maximize behavior

**Details:**

**Targets:**
- Extend WindowState with isMinimized, isMaximized, savedBounds fields
- Four new store actions: minimizeWindow, restoreWindow, maximizeWindow, unmaximizeWindow
- savedBounds pattern handles both minimize and maximize (single restore target)
- Auto-activate next topmost non-minimized window on minimize
- Arrangement functions filter minimized, un-maximize maximized windows
- CSS-drawn title bar buttons in Windows classic order (minimize, maximize/restore, close)
- MinimizedBar component: 160px compact bar at workspace top, draggable
- Maximize fills workspace, hides title bar, disables drag/resize
- Double-click title bar toggles maximize/restore

### Phase 40: Maximize & Restore Controls

**Goal**: Child windows can maximize to fill workspace with maximum canvas space
**Depends on**: Phase 39
**Requirements**: CTRL-02, CTRL-04, MAXZ-01, MAXZ-02, MAXZ-03, MAXZ-04
**Plans:** 0 plans (all criteria delivered by Phase 39-02)
**Note**: All 6 success criteria were fully implemented in Phase 39-02. No additional work needed.

Plans:

- [x] Delivered by 39-02-PLAN.md — maximize fills workspace, hidden title bar, restore button, double-click toggle

---

## Milestone Summary

**Key Decisions:**

- savedBounds pattern for both minimize and maximize (single restore target)
- Auto-activate next topmost non-minimized window on minimize
- Arrangement filters minimized, un-maximizes maximized windows during arrangement
- CSS-drawn button icons (no text/SVG, pure pseudo-elements)
- MinimizedBar uses manual drag pattern (same as ChildWindow)
- Phase 40 success criteria fully delivered by Phase 39-02 (no separate implementation)

**Issues Resolved:**

None — clean implementation

**Issues Deferred:**

None

**Technical Debt Incurred:**

None — clean implementation with no shortcuts

---

_For current project status, see .planning/ROADMAP.md_
