# Milestone v1.5: Functional Tools

**Status:** SHIPPED 2026-02-04
**Phases:** 14-15
**Total Plans:** 3

## Overview

Bring the AC Map Editor to full tool parity with SEdit by activating existing but hidden tools and implementing the missing CONVEYOR tool. Research showed 99% of infrastructure was already built — this milestone exposed functionality that existed but wasn't accessible via the toolbar, plus added one new tool using proven patterns from BRIDGE/BUNKER implementations.

## Phases

### Phase 14: Toolbar Activation

**Goal**: Users can access all existing SEdit game object tools through the toolbar
**Depends on**: Phase 13
**Requirements**: TOOL-01, TOOL-02, TOOL-03
**Plans**: 1 plan

Plans:

- [x] 14-01: Register SPAWN, SWITCH, BRIDGE in toolbar arrays with shortcuts S/H/J

**Success Criteria:**
1. SPAWN tool button appears in toolbar with icon and activates tool on click
2. SWITCH tool button appears in toolbar with icon and activates tool on click
3. BRIDGE tool button appears in toolbar with icon and activates tool on click
4. Keyboard shortcuts: S for SPAWN, H for SWITCH (W taken by WALL), J for BRIDGE (B taken by PENCIL)
5. All three tools function correctly when activated (place game objects on map)

**Details:**
- Single-file change to ToolBar.tsx — added 3 entries to gameObjectStampTools and gameObjectRectTools arrays
- All handler/panel code already existed from previous implementation
- Completed in 1 minute

### Phase 15: Conveyor Tool

**Goal**: Users can place conveyor belt tiles with directional patterns matching SEdit behavior
**Depends on**: Phase 14
**Requirements**: CONV-01, CONV-02, CONV-03, CONV-04
**Plans**: 2 plans

Plans:

- [x] 15-01: Add CONVEYOR to toolbar + variant dropdown pattern for all game object tools
- [x] 15-02: Escape key cancel for rect drag + live tile preview during CONVEYOR drag

**Success Criteria:**
1. CONVEYOR tool button appears in toolbar with icon and keyboard shortcut (C)
2. Variant dropdown on toolbar shows direction selector (Left-Right vs Up-Down) when CONVEYOR clicked
3. User can drag a rectangle on map (2x2 minimum size) to define conveyor area
4. Conveyor tiles fill rectangle with correct 4-tile repeating pattern based on selected direction
5. Left-Right conveyor pattern matches SEdit's horizontal conveyor appearance
6. Up-Down conveyor pattern matches SEdit's vertical conveyor appearance

**Details:**
- Plan 01: Created variant dropdown system for all 6 game object tools, added CONVEYOR button with C shortcut
- Plan 02: Added Escape cancellation for all drag operations, live preview at 70% opacity during CONVEYOR drag
- Preview algorithm exactly matches GameObjectSystem.placeConveyor() for WYSIWYG accuracy
- Handles animated tiles and odd-dimension edge cases correctly

## Progress

| Phase | Milestone | Plans Complete | Status | Completed |
|-------|-----------|----------------|--------|-----------|
| 14. Toolbar Activation | v1.5 | 1/1 | Complete | 2026-02-04 |
| 15. Conveyor Tool | v1.5 | 2/2 | Complete | 2026-02-04 |

## Coverage

| Requirement | Phase | Verified |
|-------------|-------|----------|
| TOOL-01 | 14 | SATISFIED |
| TOOL-02 | 14 | SATISFIED |
| TOOL-03 | 14 | SATISFIED |
| CONV-01 | 15 | SATISFIED |
| CONV-02 | 15 | SATISFIED |
| CONV-03 | 15 | SATISFIED |
| CONV-04 | 15 | SATISFIED |

**Total: 7/7 requirements mapped (100% coverage)**

---

## Milestone Summary

**Key Decisions:**

- Keyboard shortcuts S/H/J for SPAWN/SWITCH/BRIDGE (W and B already taken by WALL and PENCIL)
- Variant selection via toolbar dropdown instead of separate panel controls
- Dropdown toggles on tool button click when tool already active
- Escape cancellation applies to ALL rect tools and line tools (not just CONVEYOR)
- Live preview renders at 70% opacity for see-through effect
- Preview algorithm exactly matches placement algorithm for WYSIWYG accuracy

**Issues Resolved:**

- Game object tools were fully implemented but inaccessible (no toolbar buttons)
- CONVEYOR tool missing entirely from editor
- Inconsistent variant selection UX (some tools had panel controls, some had nothing)
- No way to cancel in-progress drag/line operations

**Issues Deferred:**

- Pre-existing TypeScript errors in App.tsx, MapParser.ts, WallSystem.ts (unrelated to tools)
- Game object tools show "needs custom.dat" warning when custom.dat not loaded (existing behavior)
- Orphaned exports from previous milestones (MapSettingsPanel, TabbedBottomPanel, etc.)

**Technical Debt Incurred:**

- None — v1.5 introduced 0 new tech debt items

---

_For current project status, see .planning/PROJECT.md_

---
*Archived: 2026-02-04 as part of v1.5 milestone completion*
