# Requirements Archive: v1.6 SELECT & Animation Panel / v1.7 Performance & Portability

**Archived:** 2026-02-08
**Status:** SHIPPED

For current requirements, see `.planning/REQUIREMENTS.md` (deleted after archival — next milestone starts fresh).

---

## v1.6 Requirements

### Selection

- [x] **SEL-01**: User can marquee-select a rectangular region by dragging on the map canvas
- [x] **SEL-02**: Active selection displays marching ants animated border
- [x] **SEL-03**: User can cancel/deselect with Escape key
- [x] **SEL-04**: Selection coordinates are accurate at all zoom levels (0.25x-4x)

### Clipboard

- [x] **CLIP-01**: User can copy selection to clipboard (Ctrl+C)
- [x] **CLIP-02**: User can cut selection to clipboard (Ctrl+X)
- [x] **CLIP-03**: User can paste clipboard as floating preview (Ctrl+V)
- [x] **CLIP-04**: User can delete selection contents (Delete key)
- [x] **CLIP-05**: Floating paste preview renders semi-transparently and follows cursor
- [x] **CLIP-06**: User can commit floating paste with click, or cancel with Escape

### Transforms

- [x] **XFRM-01**: User can mirror clipboard contents horizontally
- [x] **XFRM-02**: User can mirror clipboard contents vertically
- [x] **XFRM-03**: User can rotate clipboard contents 90 degrees
- [x] **XFRM-04**: All transforms use SEdit keyboard shortcuts

### Animation Panel

- [x] **ANIM-01**: Animation panel displays 00-FF hex-numbered vertical list (replacing grid)
- [x] **ANIM-02**: Tile/Anim radio toggle switches between placing static tile vs animated tile
- [x] **ANIM-03**: Offset field controls animation frame offset

## v1.7 Requirements

### Performance — Zustand Store

- [x] **PERF-01**: All components use granular Zustand selectors (no full-store destructuring)
- [x] **PERF-02**: animationFrame changes only re-render animation-displaying components
- [x] **PERF-03**: canUndo/canRedo update reactively via selector subscription

### Performance — Canvas Rendering

- [x] **PERF-04**: MapCanvas uses layered rendering (static tiles, overlays, animation as separate layers)
- [x] **PERF-05**: Grid lines drawn with batched path operations (2 strokes, not 60)
- [x] **PERF-06**: Canvas resize debounced via requestAnimationFrame

### Performance — Minimap

- [x] **PERF-07**: Minimap uses pre-computed tile color lookup table (zero DOM canvas creation per draw)

### Performance — State Batching

- [x] **PERF-08**: Wall/line drawing triggers single state update for entire operation
- [x] **PERF-09**: Map tile mutations use consistent immutable pattern (no mutate + spread)

### Performance — Undo System

- [x] **PERF-10**: Undo entries store deltas (changed tiles only), not full 128KB array copies
- [x] **PERF-11**: Redo stack bounded to maxUndoLevels

### Portability

- [x] **PORT-01**: FileService adapter interface in src/core/ abstracts file I/O
- [x] **PORT-02**: Map decompression extracted from App.tsx into core service
- [x] **PORT-03**: No direct window.electronAPI calls in src/components/ or src/core/

## Future Requirements (Not In Scope)

### Visual Polish

- **WIN98-01**: Win98 panel interiors with authentic inset borders
- **WIN98-02**: Win98 scrollbars matching classic appearance
- **WIN98-03**: Win98 dialog controls (buttons, checkboxes, radio buttons)

### Tool Verification

- **TOOL-01**: Tool behavior verification at all zoom levels
- **TOOL-02**: Wall constrain mode (shift-key axis locking)

## Out of Scope

| Feature | Reason |
|---------|--------|
| System clipboard integration | Internal clipboard preserves tile encoding without serialization overhead |
| Multi-selection (non-contiguous) | SEdit only supports single rectangle selection |
| Resize selection handles | SEdit doesn't have this; standard marquee only |
| Rotation by arbitrary angle | SEdit only supports 90 rotation |
| Content-aware transform tables | SEdit's rotTbl/mirTbl are complex; start with geometric transforms |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| SEL-01 | Phase 16 | Complete |
| SEL-02 | Phase 16 | Complete |
| SEL-03 | Phase 16 | Complete |
| SEL-04 | Phase 16 | Complete |
| CLIP-01 | Phase 17 | Complete |
| CLIP-02 | Phase 17 | Complete |
| CLIP-03 | Phase 18 | Complete |
| CLIP-04 | Phase 17 | Complete |
| CLIP-05 | Phase 18 | Complete |
| CLIP-06 | Phase 18 | Complete |
| XFRM-01 | Phase 19 | Complete |
| XFRM-02 | Phase 19 | Complete |
| XFRM-03 | Phase 19 | Complete |
| XFRM-04 | Phase 19 | Complete |
| ANIM-01 | Phase 20 | Complete |
| ANIM-02 | Phase 20 | Complete |
| ANIM-03 | Phase 20 | Complete |
| PERF-01 | Phase 21 | Complete |
| PERF-02 | Phase 21 | Complete |
| PERF-03 | Phase 21 | Complete |
| PERF-04 | Phase 22 | Complete |
| PERF-05 | Phase 22 | Complete |
| PERF-06 | Phase 22 | Complete |
| PERF-07 | Phase 23 | Complete |
| PERF-08 | Phase 24 | Complete |
| PERF-09 | Phase 24 | Complete |
| PERF-10 | Phase 25 | Complete |
| PERF-11 | Phase 25 | Complete |
| PORT-01 | Phase 26 | Complete |
| PORT-02 | Phase 26 | Complete |
| PORT-03 | Phase 26 | Complete |

**Coverage:**
- v1.6 requirements: 17 total — 17 shipped, 0 dropped
- v1.7 requirements: 14 total — 14 shipped, 0 dropped

---

## Milestone Summary

**Shipped:** 31 of 31 requirements (100%)
**Adjusted:** None
**Dropped:** None

---
*Archived: 2026-02-08 as part of v1.6/v1.7 milestone completion*
