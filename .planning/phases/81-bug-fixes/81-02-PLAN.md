---
phase: 81-bug-fixes
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - electron/main.ts
autonomous: true

must_haves:
  truths:
    - "Help menu exists in app menu bar with 'About AC Map Editor' item"
    - "About dialog shows 'AC Map Editor' title, version number, copyright, and author"
    - "Splash screen appears immediately on app startup before main window"
    - "Splash screen shows app name, version, copyright, and author"
    - "Splash screen closes when main window is ready to show"
  artifacts:
    - path: "electron/main.ts"
      provides: "Help menu with About dialog, splash screen BrowserWindow"
      contains: "About AC Map Editor"
  key_links:
    - from: "electron/main.ts Help menu click handler"
      to: "dialog.showMessageBoxSync"
      via: "Electron dialog API with mainWindow as parent"
      pattern: "dialog\\.showMessageBoxSync"
    - from: "electron/main.ts createWindow()"
      to: "createSplashScreen()"
      via: "Called before mainWindow creation, closed on ready-to-show"
      pattern: "createSplashScreen"
---

<objective>
Add branding to the app: Help menu with About dialog showing copyright/author/version, and splash screen on startup.

Purpose: BRAND-01, BRAND-02 — professional branding with copyright and author attribution.
Output: Help menu with About dialog, splash screen BrowserWindow in electron/main.ts.
</objective>

<execution_context>
@C:\Users\arcje\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\arcje\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/81-bug-fixes/81-RESEARCH.md
@electron/main.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Help menu with About dialog</name>
  <files>electron/main.ts</files>
  <action>
    Add a Help menu entry to the `menuTemplate` array in `createWindow()`, after the existing Window menu (after line 126, before the closing `]` of menuTemplate):

    ```typescript
    {
      label: 'Help',
      submenu: [
        {
          label: 'About AC Map Editor',
          click: () => {
            dialog.showMessageBoxSync(mainWindow!, {
              type: 'info',
              title: 'About AC Map Editor',
              message: 'AC Map Editor',
              detail: `Version ${app.getVersion()}\n\n\u00A9 Arcbound Interactive 2026\nby aTreYu`,
              buttons: ['OK']
            });
          }
        }
      ]
    }
    ```

    Notes:
    - `dialog` is already imported at line 1 (`import { app, BrowserWindow, ipcMain, dialog, Menu } from 'electron';`)
    - `app.getVersion()` reads from package.json version field (currently "1.0.1")
    - Use `\u00A9` for the copyright symbol to avoid encoding issues
    - Pass `mainWindow!` as first argument to ensure dialog is modal to the main window (not hidden behind it)
    - Use `showMessageBoxSync` (synchronous) — simple OK dialog doesn't need async
  </action>
  <verify>
    Grep for "About AC Map Editor" in electron/main.ts — appears in menu label and dialog title.
    Grep for "Arcbound Interactive" in electron/main.ts — appears in dialog detail.
    Grep for "aTreYu" in electron/main.ts — appears in dialog detail.
  </verify>
  <done>Help > About AC Map Editor menu item opens native dialog showing "AC Map Editor", version from package.json, "© Arcbound Interactive 2026", and "by aTreYu".</done>
</task>

<task type="auto">
  <name>Task 2: Add splash screen on app startup</name>
  <files>electron/main.ts</files>
  <action>
    Add splash screen functionality to electron/main.ts:

    1. Add `let splashWindow: BrowserWindow | null = null;` declaration near the top, after the `let mainWindow` declaration (line 6).

    2. Add a `createSplashScreen()` function before `createWindow()`:
    ```typescript
    function createSplashScreen() {
      splashWindow = new BrowserWindow({
        width: 400,
        height: 300,
        frame: false,
        alwaysOnTop: true,
        transparent: false,
        backgroundColor: '#1e1e1e',
        resizable: false,
        skipTaskbar: true,
        webPreferences: {
          nodeIntegration: false,
          contextIsolation: true
        }
      });

      const version = app.getVersion();
      const html = `<!DOCTYPE html>
    <html>
      <head>
        <meta charset="UTF-8">
        <style>
          body {
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background: #1e1e1e;
            color: #fff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            user-select: none;
          }
          .splash { text-align: center; padding: 40px; }
          h1 { margin: 0 0 16px 0; font-size: 28px; font-weight: 300; letter-spacing: 1px; }
          .version { font-size: 14px; color: #888; margin: 8px 0; }
          .copyright { font-size: 12px; color: #666; margin-top: 24px; }
          .author { font-size: 11px; color: #555; margin-top: 4px; }
        </style>
      </head>
      <body>
        <div class="splash">
          <h1>AC Map Editor</h1>
          <div class="version">Version ${version}</div>
          <div class="copyright">\u00A9 Arcbound Interactive 2026</div>
          <div class="author">by aTreYu</div>
        </div>
      </body>
    </html>`;

      splashWindow.loadURL(`data:text/html;charset=utf-8,${encodeURIComponent(html)}`);
      splashWindow.center();
    }
    ```

    3. Modify `createWindow()`:
    - Add `createSplashScreen();` as the FIRST line inside createWindow().
    - Add `show: false` to the mainWindow BrowserWindow options (so it doesn't show until ready).
    - Add a `ready-to-show` event handler after the loadURL/loadFile block:
    ```typescript
    mainWindow.once('ready-to-show', () => {
      if (splashWindow) {
        splashWindow.close();
        splashWindow = null;
      }
      mainWindow!.show();
    });
    ```
    - Place this BEFORE the existing `mainWindow.on('closed', ...)` handler.

    Key design decisions:
    - `transparent: false` + `backgroundColor: '#1e1e1e'` avoids Windows transparency rendering issues
    - `skipTaskbar: true` keeps splash off the taskbar
    - `resizable: false` prevents accidental resizing
    - `frame: false` gives clean borderless look
    - `alwaysOnTop: true` keeps splash visible during loading
    - Splash closes BEFORE mainWindow.show() in the same callback to prevent visual overlap (Pitfall 3 from research)
    - `center()` ensures splash appears in screen center regardless of multi-monitor setup
  </action>
  <verify>
    Grep for "createSplashScreen" in electron/main.ts — appears as function definition and call in createWindow().
    Grep for "splashWindow" in electron/main.ts — appears in declaration, createSplashScreen, and ready-to-show handler.
    Grep for "show: false" in electron/main.ts — mainWindow starts hidden.
    Grep for "ready-to-show" in electron/main.ts — event closes splash and shows main window.
    Run: `npm run typecheck` — zero TypeScript errors.
  </verify>
  <done>
    App shows frameless splash screen on startup with "AC Map Editor", version, copyright, and author. Splash closes and main window appears when ready. No flicker or overlap between splash and main window.
  </done>
</task>

</tasks>

<verification>
1. `npm run typecheck` passes with zero errors
2. Help menu exists in menuTemplate with About item
3. About dialog uses dialog.showMessageBoxSync with mainWindow as parent
4. About dialog detail includes version, copyright symbol, "Arcbound Interactive 2026", "by aTreYu"
5. splashWindow created in createSplashScreen() with frame:false, alwaysOnTop:true
6. mainWindow has show:false, ready-to-show handler closes splash then shows main
7. Splash HTML contains app name, version, copyright, author
</verification>

<success_criteria>
- Help > About opens native dialog with correct branding text
- Splash screen appears on startup with branding, closes when main window is ready
- Zero TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/81-bug-fixes/81-02-SUMMARY.md`
</output>
