---
phase: 07-sedit-layout-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/App.css
  - src/App.tsx
  - src/components/MapCanvas/MapCanvas.css
  - src/components/MapCanvas/MapCanvas.tsx
autonomous: true

must_haves:
  truths:
    - "Map canvas fills maximum available space as the dominant UI element"
    - "Map canvas displays within a bordered window frame matching Win95/98 inset style"
    - "Gray background is visible around the map window frame"
    - "Bottom tiles panel defaults to 20% height"
    - "Dragging tiles panel divider up reveals more tileset, down reveals more canvas"
    - "Resize divider has Win95/98 raised bar appearance"
  artifacts:
    - path: "src/App.css"
      provides: "Win95/98 CSS variables and window frame classes"
      contains: "--workspace-bg"
    - path: "src/components/MapCanvas/MapCanvas.css"
      provides: "Window frame styling for canvas container"
      contains: "map-window-frame"
    - path: "src/components/MapCanvas/MapCanvas.tsx"
      provides: "Canvas centered within frame with proper sizing"
  key_links:
    - from: "src/App.tsx"
      to: "MapCanvas"
      via: ".main-area applying workspace background"
    - from: "src/components/MapCanvas/MapCanvas.css"
      to: "App.css CSS variables"
      via: "var(--workspace-bg) reference"
---

<objective>
Restructure the UI with Win95/98 aesthetic: map canvas as dominant element within a beveled window frame, gray workspace background visible around the frame, and classic raised-bar resize divider.

Purpose: Establish the SEdit-style layout foundation where the map canvas feels like a viewport into the map, centered when not filling space.
Output: Visual layout matching SEdit with professional Win95/98 styling.
</objective>

<execution_context>
@C:\Users\arcje\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\arcje\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-sedit-layout-foundation/07-CONTEXT.md
@.planning/phases/07-sedit-layout-foundation/07-RESEARCH.md
@src/App.tsx
@src/App.css
@src/components/MapCanvas/MapCanvas.tsx
@src/components/MapCanvas/MapCanvas.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Win95/98 CSS variables and workspace styling</name>
  <files>src/App.css</files>
  <action>
Add new CSS custom properties for Win95/98 styling to :root:
- `--workspace-bg: #808080;` for dark theme (classic Windows APPWORKSPACE gray)
- Add light theme override in .theme-light

Add Win95/98 inset border pattern using box-shadow (from RESEARCH.md):
```css
.win95-frame-inset {
  box-shadow:
    inset 1px 1px 0px 0px var(--color-dark-900),
    inset -1px -1px 0px 0px rgba(255,255,255,0.1),
    inset 2px 2px 0px 0px var(--border-default),
    inset -2px -2px 0px 0px var(--border-subtle);
}
```

Update `.main-area` to have workspace background:
- Add `background: var(--workspace-bg);`
- Keep `position: relative;` for minimap positioning

Update `.resize-handle-horizontal` with Win95/98 raised bar styling:
- Use box-shadow pattern for 3D raised appearance:
```css
box-shadow:
  -1px -1px 0px 0px rgba(255,255,255,0.2),
  1px 1px 0px 0px var(--border-default),
  inset 0px 1px 0px 0px rgba(255,255,255,0.1);
```
- Keep existing height (6px) and cursor
  </action>
  <verify>Run `npm run typecheck` - no errors. Visual check: styles defined correctly in CSS.</verify>
  <done>CSS variables and utility classes for Win95/98 styling are defined. Workspace background and beveled divider patterns ready for use.</done>
</task>

<task type="auto">
  <name>Task 2: Apply window frame to MapCanvas container</name>
  <files>src/components/MapCanvas/MapCanvas.css, src/components/MapCanvas/MapCanvas.tsx</files>
  <action>
Update MapCanvas.css:
1. Add `.map-window-frame` class with Win95/98 inset styling:
```css
.map-window-frame {
  box-shadow:
    inset 1px 1px 0px 0px var(--color-dark-900),
    inset -1px -1px 0px 0px rgba(255,255,255,0.1),
    inset 2px 2px 0px 0px var(--border-default),
    inset -2px -2px 0px 0px var(--border-subtle);
  background: var(--workspace-bg);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4px;
  overflow: hidden;
}
```

2. Update `.map-canvas-container` to work within frame:
- Remove `flex: 1;` (parent will control sizing now)
- Keep position: relative for scrollbars
- Set `max-width` and `max-height` based on map size (256 * 16 * zoom)

3. Add inner wrapper class for canvas centering:
```css
.map-canvas-inner {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}
```

Update MapCanvas.tsx:
1. Wrap the existing container in `.map-window-frame` div
2. The frame should be the flex child that grows
3. Inner container holds canvas + scrollbars as before
4. Canvas sizing via ResizeObserver should remain unchanged (it uses container.clientWidth/Height)

Keep existing scroll bar positioning relative to inner container.
  </action>
  <verify>Run `npm run electron:dev` and visually confirm: canvas appears within beveled frame, gray background visible if canvas is small.</verify>
  <done>MapCanvas displays within Win95/98 style inset frame. Canvas centering works when smaller than available space.</done>
</task>

<task type="auto">
  <name>Task 3: Verify layout and panel interaction</name>
  <files>src/App.tsx</files>
  <action>
Verify App.tsx layout works correctly:
1. `.main-area` should have the workspace background applied
2. MapCanvas fills main-area with window frame styling
3. Bottom panel still at 20% default, collapsible behavior unchanged
4. Resize divider between panels has raised bar styling

Test the following interactions:
- Resize divider drag: should smoothly reveal more tileset (drag up) or canvas (drag down)
- Panel collapse: double-click or chevron button should still work
- Canvas pan/zoom: right-click drag and wheel zoom work as before
- Minimap positioning: should remain in top-right corner inside main-area

No code changes needed if layout works correctly. Only make adjustments if:
- Frame doesn't fill available space
- Minimap positioning broken
- Panel interactions broken
  </action>
  <verify>Run `npm run electron:dev`. Test: resize divider, collapse panel, zoom/pan canvas. All interactions work.</verify>
  <done>SEdit-style layout complete: huge canvas in beveled frame, gray workspace visible, 20% bottom panel, working divider.</done>
</task>

</tasks>

<verification>
All phase requirements satisfied:
- LAYOUT-01: Map canvas fills maximum available space (window frame expands to fill main-area)
- LAYOUT-02: Map canvas in bordered window frame (Win95/98 inset box-shadow styling)
- LAYOUT-03: Gray background visible around frame (--workspace-bg on main-area)
- LAYOUT-04: Bottom tiles panel at 20% default (existing defaultSize={20})
- LAYOUT-05: Divider drag reveals more/less content (existing react-resizable-panels behavior)
</verification>

<success_criteria>
- [ ] Win95/98 beveled frame visible around map canvas
- [ ] Gray workspace background visible when canvas smaller than frame
- [ ] Canvas fills maximum space as dominant UI element
- [ ] Bottom panel at 20% height by default
- [ ] Divider drag smoothly resizes panels
- [ ] All existing functionality preserved (zoom, pan, minimap, collapse)
</success_criteria>

<output>
After completion, create `.planning/phases/07-sedit-layout-foundation/07-01-SUMMARY.md`
</output>
