---
phase: 13-application-chrome
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ToolBar/Toolbar.tsx
  - src/components/ToolBar/ToolBar.css
  - src/components/StatusBar/StatusBar.tsx
  - src/components/StatusBar/StatusBar.css
autonomous: true

must_haves:
  truths:
    - "Toolbar buttons appear flat at rest (transparent border), raised on hover, sunken when pressed or toggled active"
    - "Toolbar buttons display icons with text labels below each icon"
    - "Toolbar button groups are visually separated by etched vertical separators"
    - "Status bar displays cursor X, Y coordinates, tile ID, zoom level, active tool name, and selection dimensions in separate sunken fields"
    - "Status bar has a diagonal resize grip in the bottom-right corner"
    - "Disabled toolbar buttons show grey text with white emboss effect"
  artifacts:
    - path: "src/components/ToolBar/ToolBar.css"
      provides: "XP Classic toolbar button state styling"
      contains: "toolbar-button:hover"
    - path: "src/components/ToolBar/Toolbar.tsx"
      provides: "Toolbar with icon+label layout and group separators"
      contains: "toolbar-separator"
    - path: "src/components/StatusBar/StatusBar.css"
      provides: "XP Classic sunken field styling and resize grip"
      contains: "status-field"
    - path: "src/components/StatusBar/StatusBar.tsx"
      provides: "Status bar with full context fields"
      contains: "currentTool"
  key_links:
    - from: "src/components/StatusBar/StatusBar.tsx"
      to: "src/core/editor/EditorState.ts"
      via: "useEditorStore hook"
      pattern: "useEditorStore"
---

<objective>
Style the toolbar and status bar with XP Classic chrome.

Purpose: CHROME-01 and CHROME-02 -- toolbar buttons need flat/raised/sunken state transitions with icon+label layout, and the status bar needs sunken field sections displaying full editing context with a resize grip.

Output: Toolbar with XP Classic button behavior (flat rest, raised hover, sunken active), etched group separators, visible text labels below icons. Status bar with sunken fields for X, Y, Tile, Zoom, Tool, Selection, and a diagonal resize grip.
</objective>

<execution_context>
@C:\Users\arcje\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\arcje\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-application-chrome/13-CONTEXT.md
@.planning/phases/13-application-chrome/13-RESEARCH.md
@src/components/ToolBar/Toolbar.tsx
@src/components/ToolBar/ToolBar.css
@src/components/StatusBar/StatusBar.tsx
@src/components/StatusBar/StatusBar.css
@src/styles/win98-variables.css
@src/styles/win98-bevels.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: XP Classic toolbar button states with icon+label layout and group separators</name>
  <files>
    src/components/ToolBar/Toolbar.tsx
    src/components/ToolBar/ToolBar.css
  </files>
  <action>
**ToolBar.css** -- Replace the entire file with XP Classic toolbar styling:

1. **Toolbar container**: `display: flex`, `align-items: center`, `padding: 2px 4px`, `background: var(--win98-ButtonFace)`, `border-bottom: 1px solid var(--win98-ButtonShadow)`, `gap: 0px` (buttons handle their own spacing).

2. **Toolbar button states** (the core XP Classic behavior):
   - **Rest**: `border: 1px solid transparent`, `background: transparent`, `padding: 4px 6px`, `display: flex`, `flex-direction: column`, `align-items: center`, `gap: 1px`, `cursor: pointer`, `color: var(--win98-ButtonText)`, `min-width: 36px`, `height: auto`. No transitions (instant state changes).
   - **Hover** (`:hover:not(:disabled)`): `border-top: 1px solid var(--win98-ButtonHighlight)`, `border-left: 1px solid var(--win98-ButtonHighlight)`, `border-right: 1px solid var(--win98-ButtonDkShadow)`, `border-bottom: 1px solid var(--win98-ButtonDkShadow)`.
   - **Active/pressed** (`:active:not(:disabled)`): `border-top: 1px solid var(--win98-ButtonDkShadow)`, `border-left: 1px solid var(--win98-ButtonDkShadow)`, `border-right: 1px solid var(--win98-ButtonHighlight)`, `border-bottom: 1px solid var(--win98-ButtonHighlight)`.
   - **Toggled on** (`.active`): Same sunken borders as `:active`, plus `background: var(--win98-ButtonShadow)` to show it's toggled.
   - **Disabled** (`:disabled`): `color: var(--win98-GrayText)`, `text-shadow: 1px 1px 0 var(--win98-ButtonHighlight)`, `cursor: not-allowed`.

3. **Icon + label**: `.toolbar-icon` at `font-size: 16px`, `line-height: 1`. `.toolbar-label` VISIBLE (remove the `display: none`), `font-size: 9px`, `text-transform: uppercase`, `letter-spacing: 0.3px`, `white-space: nowrap`.

4. **Separator**: `.toolbar-separator` -- a vertical etched line between button groups. `width: 2px`, `height: 24px`, `margin: 0 4px`, `align-self: center`, `border-left: 1px solid var(--win98-ButtonShadow)`, `border-right: 1px solid var(--win98-ButtonHighlight)`.

5. **Spacer + info**: `.toolbar-spacer` as `flex: 1`. `.toolbar-info` and `.map-name` with `font-size: 11px`, `color: var(--win98-ButtonText)`.

**Toolbar.tsx** -- Add separator elements between logical button groups:
- Group 1: New, Open, Save
- (separator)
- Group 2: Undo, Redo
- (separator)
- Group 3: All tool buttons (Select through Picker)
- (separator)
- Group 4: Grid, Settings, Theme
- (spacer + map name info)

Add `<div className="toolbar-separator" />` between each group. The separator is a simple `<div>` element.

Do NOT change any button functionality, keyboard shortcuts, or state management. Only change layout structure and CSS.
  </action>
  <verify>
Run `npm run typecheck` to verify no TypeScript errors. Visually inspect that toolbar buttons appear flat at rest, have visible text labels, and separators appear between groups.
  </verify>
  <done>
Toolbar buttons are flat at rest, raise on hover, sink on press/active. Text labels are visible below icons. Etched separators divide button groups. Disabled buttons show grey embossed text.
  </done>
</task>

<task type="auto">
  <name>Task 2: XP Classic status bar with sunken fields and resize grip</name>
  <files>
    src/components/StatusBar/StatusBar.tsx
    src/components/StatusBar/StatusBar.css
  </files>
  <action>
**StatusBar.tsx** -- Rewrite the JSX to display full editing context in separate sunken fields:

1. Import `useEditorStore` to access `currentTool` and `tileSelection` (in addition to existing `map` and `viewport`).

2. Render these fields in order:
   - **Coordinates field**: `X: {value}  Y: {value}` -- show `--` when cursor is off-map (cursorX < 0). Fixed width.
   - **Tile field**: `Tile: {cursorTileId}` or `Tile: --` when no tile. Fixed width.
   - **Zoom field**: `Zoom: {zoom}%` showing `Math.round(viewport.zoom * 100)`. Fixed width.
   - **Tool field**: `Tool: {currentTool}` showing the current tool name. Auto width.
   - **Selection field** (conditional): Only show when `tileSelection.width > 1 || tileSelection.height > 1`. Display `Sel: {width} x {height}`. Auto width.
   - **Spacer**: `flex: 1` to push remaining content right.
   - **Resize grip**: A `<div className="status-resize-grip" />` at the far right.

3. Each field is a `<div className="status-field">` containing the label and value text directly (no separate label/value spans needed -- just text content like `X: 42  Y: 128`). Simple is better here.

4. Remove the map info fields (Size, Teams, Objective) and the "AC Map Editor" text -- those are not standard status bar content per the CONTEXT.md decision.

**StatusBar.css** -- Replace with XP Classic styling:

1. **Container**: `display: flex`, `align-items: center`, `gap: 2px`, `padding: 2px 4px`, `background: var(--win98-ButtonFace)`, `border-top: 1px solid var(--win98-ButtonHighlight)`, `font-size: 11px`, `min-height: 22px`.

2. **Sunken fields** (`.status-field`): `padding: 1px 6px`, `border-top: 1px solid var(--win98-ButtonShadow)`, `border-left: 1px solid var(--win98-ButtonShadow)`, `border-right: 1px solid var(--win98-ButtonHighlight)`, `border-bottom: 1px solid var(--win98-ButtonHighlight)`, `background: var(--win98-ButtonFace)`, `color: var(--win98-ButtonText)`, `white-space: nowrap`. Use 1px sunken borders (shallow), NOT 2px deep.

3. **Fixed width fields**: Coordinates field ~`min-width: 100px`, Tile field ~`min-width: 65px`, Zoom field ~`min-width: 70px`. Tool and Selection fields are `min-width: auto`.

4. **Spacer**: `.status-spacer` with `flex: 1`.

5. **Resize grip** (`.status-resize-grip`): `width: 16px`, `height: 16px`, `flex-shrink: 0`. Use CSS background to draw the classic diagonal grip pattern -- three short diagonal lines in the bottom-right corner using linear-gradient. The pattern uses `var(--win98-ButtonHighlight)` for the highlight lines and `var(--win98-ButtonShadow)` for the shadow lines, creating a 3D appearance:

```css
.status-resize-grip {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  background:
    linear-gradient(135deg,
      transparent 0px, transparent 5px,
      var(--win98-ButtonShadow) 5px, var(--win98-ButtonShadow) 6px,
      transparent 6px, transparent 7px,
      var(--win98-ButtonHighlight) 7px, var(--win98-ButtonHighlight) 8px,
      transparent 8px),
    linear-gradient(135deg,
      transparent 0px, transparent 9px,
      var(--win98-ButtonShadow) 9px, var(--win98-ButtonShadow) 10px,
      transparent 10px, transparent 11px,
      var(--win98-ButtonHighlight) 11px, var(--win98-ButtonHighlight) 12px,
      transparent 12px),
    linear-gradient(135deg,
      transparent 0px, transparent 13px,
      var(--win98-ButtonShadow) 13px, var(--win98-ButtonShadow) 14px,
      transparent 14px, transparent 15px,
      var(--win98-ButtonHighlight) 15px, var(--win98-ButtonHighlight) 16px,
      transparent 16px);
  background-size: 16px 16px;
  background-repeat: no-repeat;
  background-position: bottom right;
}
```

No transitions anywhere. All state changes are instant.
  </action>
  <verify>
Run `npm run typecheck` to verify no TypeScript errors. Confirm status bar shows sunken fields for coordinates, tile, zoom, tool, and selection (when multi-tile selected). Resize grip visible in bottom-right.
  </verify>
  <done>
Status bar displays cursor X/Y, tile ID, zoom, tool name, and selection dimensions in shallow sunken fields. Diagonal resize grip appears in the bottom-right corner.
  </done>
</task>

</tasks>

<verification>
1. `npm run typecheck` passes without errors
2. Toolbar buttons: flat at rest, raised border on hover, sunken border on press/active
3. Toolbar: text labels visible below each icon
4. Toolbar: etched vertical separators between File/Edit/Tool/View groups
5. Status bar: sunken fields display X, Y, Tile, Zoom, Tool, Selection
6. Status bar: diagonal resize grip visible at bottom-right
7. No CSS transitions (all state changes instant)
</verification>

<success_criteria>
- CHROME-01: Toolbar buttons display flat/raised/sunken states with icon+label layout
- CHROME-02: Status bar shows editing context in sunken fields with resize grip
</success_criteria>

<output>
After completion, create `.planning/phases/13-application-chrome/13-01-SUMMARY.md`
</output>
