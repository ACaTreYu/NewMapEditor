---
phase: 32-typescript-quality
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/core/map/MapParser.ts
  - src/core/map/WallSystem.ts
autonomous: true

must_haves:
  truths:
    - "`npm run typecheck` produces zero TypeScript errors"
    - "`strict: true` is enabled in tsconfig.json"
    - "All 6 pre-existing TypeScript errors in MapParser.ts and WallSystem.ts are resolved"
    - "No behavioral changes — all existing functionality works identically"
  artifacts:
    - path: "src/core/map/MapParser.ts"
      provides: "Map parser with zero TS errors"
      contains: "as ArrayBuffer"
    - path: "src/core/map/WallSystem.ts"
      provides: "Wall system with zero TS errors"
      contains: "_addConnection"
  key_links:
    - from: "tsconfig.json"
      to: "src/**/*.ts"
      via: "strict: true compilation"
      pattern: "\"strict\": true"
---

<objective>
Fix all 6 TypeScript errors to achieve zero-error strict mode across the entire codebase.

Purpose: This is the final phase of the project. Achieving `npm run typecheck` with zero errors and `strict: true` ensures long-term code quality and catches bugs at compile time.

Output: Clean typecheck with zero errors, no new files created, no behavioral changes.
</objective>

<execution_context>
@C:\Users\arcje\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\arcje\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/core/map/MapParser.ts
@src/core/map/WallSystem.ts
@tsconfig.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix MapParser.ts TypeScript errors (5 errors)</name>
  <files>src/core/map/MapParser.ts</files>
  <action>
Fix 5 TypeScript errors in MapParser.ts:

**TS6133 — 3 unused imports (lines 26-27, 32):**
Remove `MAP_WIDTH`, `MAP_HEIGHT`, and `createEmptyMap` from the import statement on lines 21-33. These are imported but never used in the file. The import statement should only keep: `MapData`, `MapHeader`, `MapVersion`, `MAP_MAGIC`, `TILE_COUNT`, `ObjectiveType`, `MAX_TEAMS`, `createDefaultHeader`.

**TS6133 — 1 unused local variable (line 207):**
The variable `compressedData` on line 207 (`const compressedData = new Uint8Array(buffer, compressedStart);`) is declared but never read. Remove this line entirely — it creates a `Uint8Array` slice that is never used because decompression happens via Electron IPC (the comment on lines 209-210 explains this). The `compressedStart` variable on line 206 is also only used to compute `compressedData`, so remove that line too if it becomes unused. Check if `compressedStart` is referenced elsewhere first.

**TS2322 — ArrayBuffer type incompatibility (line 299):**
In the `getTileBuffer` method, `map.tiles.buffer` returns `ArrayBufferLike` (which includes `SharedArrayBuffer`) but the method's return type is `ArrayBuffer`. Add a type assertion: change `return map.tiles.buffer;` to `return map.tiles.buffer as ArrayBuffer;`. Add a comment above explaining this is safe because the app never uses SharedArrayBuffer — `Uint16Array.buffer` is always a plain `ArrayBuffer` in browser/Electron contexts.
  </action>
  <verify>Run `npx tsc --noEmit` and confirm zero errors from MapParser.ts. All 5 MapParser errors should be gone.</verify>
  <done>MapParser.ts has zero TypeScript errors. No unused imports, no unused variables, ArrayBuffer type assertion is correct.</done>
</task>

<task type="auto">
  <name>Task 2: Fix WallSystem.ts TypeScript error and validate zero-error state</name>
  <files>src/core/map/WallSystem.ts</files>
  <action>
Fix 1 TypeScript error in WallSystem.ts:

**TS6133 — unused parameter (line 162):**
The `addConnection` parameter in `private updateNeighbor(map: MapData, x: number, y: number, addConnection: number): void` is declared but never read in the method body. Prefix it with an underscore: change `addConnection` to `_addConnection` in the parameter list. This signals the parameter is intentionally unused while preserving the method signature for callers that pass this argument.

After the fix, run `npm run typecheck` and confirm the output shows zero errors across the entire codebase. This validates that both tsconfig.json (src/) and tsconfig.node.json (electron/) are clean.
  </action>
  <verify>Run `npm run typecheck` — must produce zero errors and exit with code 0. Also verify `npx tsc --noEmit -p tsconfig.node.json` still passes.</verify>
  <done>`npm run typecheck` produces zero TypeScript errors. Both tsconfig.json and tsconfig.node.json compile cleanly with `strict: true`.</done>
</task>

</tasks>

<verification>
1. `npm run typecheck` exits with code 0 (zero errors)
2. `npx tsc --noEmit -p tsconfig.node.json` exits with code 0 (zero errors)
3. tsconfig.json still contains `"strict": true`
4. No `@ts-ignore` or `@ts-expect-error` comments were added
5. No behavioral changes — only dead code removal, parameter renaming, and one type assertion
</verification>

<success_criteria>
- `npm run typecheck` produces zero TypeScript errors
- `strict: true` remains enabled in tsconfig.json
- All 6 pre-existing errors in MapParser.ts and WallSystem.ts are resolved
- No new TypeScript errors introduced
- No runtime behavioral changes
</success_criteria>

<output>
After completion, create `.planning/phases/32-typescript-quality/32-01-SUMMARY.md`
</output>
