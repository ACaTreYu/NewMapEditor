---
phase: 27-css-design-system
plan: 02
type: execute
wave: 2
depends_on: ["27-01"]
files_modified:
  - src/components/ToolBar/ToolBar.css
  - src/components/StatusBar/StatusBar.css
  - src/components/AnimationPanel/AnimationPanel.css
  - src/components/AnimationPreview/AnimationPreview.css
  - src/components/GameObjectToolPanel/GameObjectToolPanel.css
  - src/components/TeamSelector/TeamSelector.css
  - src/components/Minimap/Minimap.css
  - src/components/MapSettingsDialog/MapSettingsDialog.css
autonomous: true

must_haves:
  truths:
    - "All component CSS files use only semantic design tokens (zero var(--win98-*) references)"
    - "All spacing follows 8px grid system (components use 8/16/24/32px increments via var(--space-*) tokens)"
    - "UI elements have rounded corners (4-8px border-radius via var(--radius-*) tokens)"
    - "Panels and cards display subtle drop shadows for depth (via var(--shadow-*) tokens)"
    - "Beveled borders are replaced with flat 1px borders and subtle shadows"
  artifacts:
    - path: "src/components/ToolBar/ToolBar.css"
      provides: "Modern toolbar styling with flat buttons, hover states, rounded corners"
    - path: "src/components/StatusBar/StatusBar.css"
      provides: "Modern status bar styling with flat sections"
    - path: "src/components/AnimationPanel/AnimationPanel.css"
      provides: "Modern animation panel with flat controls"
    - path: "src/components/MapSettingsDialog/MapSettingsDialog.css"
      provides: "Modern dialog styling with rounded corners and shadows"
  key_links:
    - from: "src/components/ToolBar/ToolBar.css"
      to: "src/styles/variables.css"
      via: "var() references"
      pattern: "var\\(--surface\\)|var\\(--shadow-"
    - from: "src/components/MapSettingsDialog/MapSettingsDialog.css"
      to: "src/styles/variables.css"
      via: "var() references"
      pattern: "var\\(--radius-|var\\(--shadow-"
---

<objective>
Migrate all 8 component CSS files from Win98 direct variable references to modern semantic design tokens.

Purpose: Complete the CSS migration by replacing every var(--win98-*) reference in component CSS with semantic tokens, modernizing the visual appearance from beveled 3D borders to flat design with subtle shadows and rounded corners.

Output: All 8 component CSS files updated to use only semantic design tokens. Zero var(--win98-*) references in entire codebase. Components display modern minimalist styling.
</objective>

<execution_context>
@C:\Users\arcje\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\arcje\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/27-css-design-system/27-RESEARCH.md
@.planning/phases/27-css-design-system/27-01-SUMMARY.md
@src/styles/variables.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate ToolBar, StatusBar, and Minimap CSS</name>
  <files>
    src/components/ToolBar/ToolBar.css
    src/components/StatusBar/StatusBar.css
    src/components/Minimap/Minimap.css
  </files>
  <action>
Migrate these 3 high-visibility component CSS files. For EACH file, apply these transformations:

**Variable Replacement Map (applies to all files):**
Replace every `var(--win98-*)` with the appropriate semantic token:
- `var(--win98-ButtonFace)` -> `var(--surface)`
- `var(--win98-ButtonHighlight)` -> `var(--border-light)` (when used as border color) or `var(--surface-light)` (when used as background)
- `var(--win98-ButtonLight)` -> `var(--surface-light)` (background) or `var(--border-subtle)` (border)
- `var(--win98-ButtonShadow)` -> `var(--border-default)` (border) or `var(--bg-active)` (background)
- `var(--win98-ButtonDkShadow)` -> `var(--border-dark)` (border) or `var(--text-primary)` (text shadow)
- `var(--win98-ButtonText)` -> `var(--text-primary)`
- `var(--win98-WindowText)` -> `var(--text-primary)`
- `var(--win98-Window)` -> `var(--bg-window)`
- `var(--win98-Highlight)` -> `var(--accent-primary)`
- `var(--win98-HighlightText)` -> `#ffffff` or use a `--text-on-accent: #ffffff` token
- `var(--win98-GrayText)` -> `var(--text-disabled)`
- `var(--win98-AppWorkspace)` -> `var(--workspace-bg)`

**Modern Styling Patterns (apply to each component):**

**ToolBar.css (32 var(--win98-*) references):**
- Replace beveled button borders (4-sided var(--win98-ButtonHighlight)/var(--win98-ButtonDkShadow) borders) with: `border: 1px solid transparent; border-radius: var(--radius-sm);`
- Toolbar button hover: `background: var(--bg-hover);` (no bevel borders)
- Toolbar button active/pressed: `background: var(--bg-active); border-color: var(--border-default);`
- Toolbar separator: `border-left: 1px solid var(--border-subtle);` (remove right highlight border)
- Dropdown menu: Add `border-radius: var(--radius-md); box-shadow: var(--shadow-lg);` and replace beveled borders with `border: 1px solid var(--border-default);`
- Dropdown item hover: `background: var(--accent-primary); color: #ffffff;` with `border-radius: var(--radius-sm);`
- Update toolbar background to `var(--surface)` with `border-bottom: 1px solid var(--border-subtle);`
- Update spacing to 8px grid: padding, gaps should use var(--space-1) increments

**StatusBar.css (14 var(--win98-*) references):**
- Replace beveled sections (4-border bevel pattern) with: `background: var(--surface); border: 1px solid var(--border-subtle); border-radius: var(--radius-sm);`
- Replace the status bar background border pattern with: `background: var(--surface); border-top: 1px solid var(--border-subtle);`
- Replace the resize grip pattern (which uses repeated ButtonShadow/ButtonHighlight in a linear-gradient) with a simpler modern approach: use a subtle dotted pattern or 3 short diagonal lines with `var(--border-default)` color. Alternatively, keep the grip visual but use `var(--border-default)` and `var(--border-light)` instead of Win98 variables.
- Update spacing to 8px grid increments

**Minimap.css (5 var(--win98-*) references):**
- Replace `background: var(--win98-ButtonFace)` with `background: var(--surface)`
- Replace beveled border (4-sided DkShadow/Highlight) with: `border: 1px solid var(--border-default); border-radius: var(--radius-md); box-shadow: var(--shadow-md);`
- This gives the minimap a clean card-like appearance with subtle elevation
  </action>
  <verify>
Run `grep -c "win98" src/components/ToolBar/ToolBar.css src/components/StatusBar/StatusBar.css src/components/Minimap/Minimap.css` - all must return 0. Run `npm run typecheck` to confirm no build issues.
  </verify>
  <done>
ToolBar.css, StatusBar.css, and Minimap.css contain zero var(--win98-*) references. Toolbar buttons use flat design with hover states and rounded corners. Status bar uses flat styling. Minimap has card-like appearance with border and shadow.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate AnimationPanel, AnimationPreview, GameObjectToolPanel, TeamSelector, and MapSettingsDialog CSS</name>
  <files>
    src/components/AnimationPanel/AnimationPanel.css
    src/components/AnimationPreview/AnimationPreview.css
    src/components/GameObjectToolPanel/GameObjectToolPanel.css
    src/components/TeamSelector/TeamSelector.css
    src/components/MapSettingsDialog/MapSettingsDialog.css
  </files>
  <action>
Migrate these 5 remaining component CSS files using the same variable replacement map from Task 1.

**AnimationPanel.css (41 var(--win98-*) references - the most complex):**
- Replace ALL beveled button borders (raised and sunken patterns) with flat borders:
  - Raised buttons: `border: 1px solid var(--border-subtle); border-radius: var(--radius-sm);`
  - Sunken/pressed buttons: `background: var(--bg-active); border: 1px solid var(--border-default); border-radius: var(--radius-sm);`
- Replace sunken well (4-border pattern on animation list area) with: `border: 1px solid var(--border-default); border-radius: var(--radius-sm);`
- Replace disabled text shadow pattern (`color: var(--win98-GrayText); text-shadow: 1px 1px 0 var(--win98-ButtonHighlight)`) with simply: `color: var(--text-disabled);` (no text-shadow - modern disabled state is just lighter color)
- Background colors: var(--win98-ButtonFace) -> var(--surface)
- Border separators: var(--win98-ButtonShadow)/var(--win98-ButtonHighlight) -> var(--border-default)
- Update spacing to 8px grid

**AnimationPreview.css (3 var(--win98-*) references):**
- var(--win98-ButtonLight) background -> var(--surface-light)
- var(--win98-GrayText) -> var(--text-disabled)
- Remove the text-shadow: 1px 1px 0 var(--win98-ButtonHighlight) pattern (modern disabled text has no embossed shadow)

**GameObjectToolPanel.css (8 var(--win98-*) references):**
- var(--win98-ButtonFace) -> var(--surface)
- var(--win98-ButtonHighlight) border -> var(--border-light)
- var(--win98-ButtonText) -> var(--text-primary)
- var(--win98-ButtonShadow) border -> var(--border-default)
- var(--win98-Window) -> var(--bg-window)
- var(--win98-WindowText) -> var(--text-primary)
- Add border-radius: var(--radius-sm) to select/dropdown elements
- Update spacing to 8px grid

**TeamSelector.css (5 var(--win98-*) references):**
- var(--win98-ButtonText) -> var(--text-primary)
- var(--win98-Highlight) -> var(--accent-primary)
- var(--win98-HighlightText) -> #ffffff
- var(--win98-ButtonDkShadow) border -> var(--border-default)
- Add border-radius: var(--radius-sm) to team selector buttons

**MapSettingsDialog.css (84 var(--win98-*) references - the largest file):**
This is the most extensive migration. The dialog uses deep 2px beveled borders extensively.
- Dialog outer frame (2px beveled border): Replace with `border: 1px solid var(--border-default); border-radius: var(--radius-lg); box-shadow: var(--shadow-xl);`
- Dialog inner frame (1px beveled): Replace with `border: none;` or `border: 1px solid var(--border-subtle);`
- Tab buttons (raised beveled): Replace with `border: 1px solid var(--border-subtle); border-radius: var(--radius-sm) var(--radius-sm) 0 0;` for top tabs
- Active tab: `background: var(--surface); border-bottom-color: var(--surface);`
- Inactive tab: `background: var(--bg-secondary);`
- Tab content area (sunken): `border: 1px solid var(--border-default); border-radius: 0 0 var(--radius-md) var(--radius-md);`
- Dialog buttons (OK/Apply/Cancel): Replace 2px beveled with `border: 1px solid var(--border-default); border-radius: var(--radius-sm); background: var(--surface);`
- Button hover: `background: var(--bg-hover);`
- Button pressed: `background: var(--bg-active);`
- Input fields (sunken 2px): `border: 1px solid var(--input-border); border-radius: var(--radius-sm); background: var(--input-bg);`
- Input focus: `border-color: var(--input-focus); box-shadow: 0 0 0 2px rgba(from var(--input-focus) r g b / 0.2);` (or simpler: `outline: 2px solid var(--input-focus);`)
- Disabled text: Remove embossed text-shadow, use `color: var(--text-disabled);` only
- Slider track (sunken): `border: 1px solid var(--border-default); border-radius: var(--radius-full); background: var(--bg-tertiary);`
- Slider thumb: `border: 1px solid var(--border-default); border-radius: var(--radius-sm); background: var(--slider-thumb);`
- Section groupbox borders (etched): `border: 1px solid var(--border-subtle); border-radius: var(--radius-md);`
- Update ALL spacing to 8px grid increments (padding: var(--space-1), var(--space-2), etc.)
  </action>
  <verify>
Run `grep -rc "win98" src/components/AnimationPanel/AnimationPanel.css src/components/AnimationPreview/AnimationPreview.css src/components/GameObjectToolPanel/GameObjectToolPanel.css src/components/TeamSelector/TeamSelector.css src/components/MapSettingsDialog/MapSettingsDialog.css` - all must return 0. Run `grep -rc "win98" src/` - must return 0 for ALL .css files. Run `npm run typecheck` to confirm no build issues.
  </verify>
  <done>
All 5 component CSS files contain zero var(--win98-*) references. Total codebase var(--win98-*) count is zero. All components use modern semantic tokens with flat borders, rounded corners, and subtle shadows. MapSettingsDialog uses card-like appearance with shadow elevation. All spacing aligned to 8px grid.
  </done>
</task>

</tasks>

<verification>
1. Run `npm run typecheck` - zero errors
2. Run `grep -r "var(--win98-" src/` - zero matches in entire src/ directory
3. Run `npm run electron:dev` and visually verify:
   - Toolbar has flat buttons with hover states, no beveled borders
   - Status bar is flat with subtle border
   - Animation panel has flat controls
   - MapSettingsDialog has rounded corners and shadow
   - Minimap has card-like appearance
   - All text renders in system font
4. Verify rounded corners visible on buttons, inputs, panels (4-8px radius)
5. Verify subtle drop shadows on minimap, dialog, dropdown menus
6. Verify 8px grid spacing throughout (no 3px, 5px, 11px paddings)
</verification>

<success_criteria>
- Zero var(--win98-*) references in entire src/ directory
- All 8 component CSS files use only semantic design tokens
- Beveled borders replaced with flat 1px borders + rounded corners
- Panels/cards display subtle drop shadows
- Spacing follows 8px grid (8/16/24/32px increments)
- UI elements have 4-8px border-radius
</success_criteria>

<output>
After completion, create `.planning/phases/27-css-design-system/27-02-SUMMARY.md`
</output>
