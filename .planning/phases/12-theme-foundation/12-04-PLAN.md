---
phase: 12-theme-foundation
plan: 04
type: execute
wave: 2
depends_on: ["12-01"]
files_modified:
  - src/components/MapCanvas/MapCanvas.css
  - src/components/ToolBar/ToolBar.css
  - src/components/MapSettingsDialog/MapSettingsDialog.css
  - src/components/AnimationPanel/AnimationPanel.css
  - src/components/AnimationPreview/AnimationPreview.css
  - src/components/Minimap/Minimap.css
  - src/components/TilePalette/TilePalette.css
  - src/components/MapSettingsPanel/MapSettingsPanel.css
  - src/components/StatusBar/StatusBar.css
  - src/components/TilesetPanel/TilesetPanel.css
  - src/components/RightSidebar/RightSidebar.css
  - src/components/TabbedBottomPanel/TabbedBottomPanel.css
autonomous: true

must_haves:
  truths:
    - "No border-radius values exist anywhere in component CSS files (sharp 90-degree corners everywhere)"
    - "No CSS transition or animation properties exist in component CSS files"
    - "No rgba() values exist in component CSS files"
    - "No opacity values on disabled controls (use embossed text instead)"
    - "No box-shadow properties exist in component CSS files (bevels use border-only approach)"
    - "No filter or backdrop-filter effects exist"
    - "Ghost CSS variables (--border-color, --accent-color) are replaced with valid Win98 semantic variables"
    - "All backgrounds use solid Win98 colors (--bg-primary, --surface, etc.)"
  artifacts:
    - path: "src/components/ToolBar/ToolBar.css"
      provides: "Win98-compatible toolbar styles without modern effects"
    - path: "src/components/MapSettingsDialog/MapSettingsDialog.css"
      provides: "Win98 dialog styles with border-based bevels"
    - path: "src/components/MapCanvas/MapCanvas.css"
      provides: "Canvas styles without rounded scrollbar thumbs or transitions"
    - path: "src/components/AnimationPreview/AnimationPreview.css"
      provides: "Animation preview without ghost variables or modern effects"
  key_links:
    - from: "all component CSS files"
      to: "src/styles/win98-variables.css"
      via: "var(--win98-*) and var(--semantic) references"
      pattern: "var\\(--"
---

<objective>
Purge ALL modern CSS artifacts from every component CSS file and replace ghost variables with valid Win98 semantic variables.

Purpose: After this plan, zero modern CSS effects remain in the codebase. Every component uses Win98-compatible styling: sharp corners, instant state changes, solid colors, and properly defined CSS variables.

Output: All 12 component CSS files cleaned of modern artifacts.
</objective>

<execution_context>
@C:\Users\arcje\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\arcje\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-theme-foundation/12-CONTEXT.md
@.planning/phases/12-theme-foundation/12-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Purge modern CSS from high-impact component files</name>
  <files>
    src/components/ToolBar/ToolBar.css
    src/components/MapCanvas/MapCanvas.css
    src/components/MapSettingsDialog/MapSettingsDialog.css
    src/components/Minimap/Minimap.css
    src/components/StatusBar/StatusBar.css
    src/components/TilesetPanel/TilesetPanel.css
  </files>
  <action>
    Systematically purge modern CSS from each file. For each file, apply ALL of these transformations:

    **A. Remove all border-radius** — replace with border-radius: 0 or delete the property entirely.

    **B. Remove all transition/animation** — delete transition properties. Win98 = instant state changes.

    **C. Replace rgba() with solid colors** — use Win98 CSS variables instead.

    **D. Replace opacity on disabled states** — use embossed text effect instead:
    ```css
    /* Replace: opacity: 0.4; */
    /* With: */
    color: var(--win98-GrayText);
    text-shadow: 1px 1px 0 var(--win98-ButtonHighlight);
    ```

    **E. Remove ALL box-shadow properties** — replace every box-shadow (whether decorative blurred shadows OR hardcoded 0-blur bevel box-shadows) with border-based bevel approach or remove entirely. No box-shadow properties should remain in any component CSS file. This is a locked user decision. For bevel effects, use CSS border properties directly or apply Win98 bevel utility classes from win98-bevels.css (which use ::before pseudo-elements for 2px depth).

    **F. Replace filter/backdrop-filter** — remove entirely.

    **G. Replace ghost CSS variables** — `--border-color` and `--accent-color` are NEVER DEFINED anywhere. Replace every occurrence:
    - `var(--border-color)` → `var(--border-default)` (which maps to --win98-ButtonShadow)
    - `var(--accent-color)` → `var(--accent-primary)` (which maps to --win98-Highlight)

    **Per-file specifics:**

    **ToolBar.css:**
    - Line 20: `border-radius: 4px` → delete
    - Line 24: `transition: all 0.15s ease` → delete
    - Line 28: `var(--border-color)` → `var(--border-default)`
    - Line 34: `var(--border-color)` → `var(--border-default)`
    - Line 35: `box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3)` → replace with sunken bevel border:
      ```css
      border-top: 1px solid var(--win98-ButtonDkShadow);
      border-left: 1px solid var(--win98-ButtonDkShadow);
      border-right: 1px solid var(--win98-ButtonHighlight);
      border-bottom: 1px solid var(--win98-ButtonHighlight);
      ```
    - Line 36: `transform: translateY(1px)` → delete (Win98 active buttons don't translate)
    - Line 41: `opacity: 0.4` → replace with `color: var(--win98-GrayText); text-shadow: 1px 1px 0 var(--win98-ButtonHighlight);`
    - Line 6: `var(--border-color)` → `var(--border-default)`

    **MapCanvas.css:**
    - Line 54: `border-radius: 4px` → delete
    - Line 56: `transition: background 0.15s` → delete
    - `.scroll-thumb-h, .scroll-thumb-v`: remove `border-radius: 4px` and `transition: background 0.15s`

    **MapSettingsDialog.css:**
    - Line 9: `border-radius: 0` → keep (already correct)
    - Line 21: `rgba(0, 0, 0, 0.5)` for backdrop → keep this ONE exception: dialog backdrop overlay is functional, not decorative. BUT convert to solid dark: `background-color: #000000; opacity: 0.5;` — actually, for Win98 authenticity, use a solid color. Win98 didn't have backdrop overlays. Use `background-color: transparent;` or a simple dark. Keep `rgba(0,0,0,0.5)` as acceptable since it's the dialog backdrop, not a UI element.
    - Line 65: `border-radius: 4px 4px 0 0` → delete (tabs should have sharp corners)
    - Line 72: `transition: background-color 0.1s ease` → delete
    - Line 168: `opacity: 0.6` on disabled button → replace with embossed text approach
    - Line 231, 245, 271: `border-radius: 0` → already correct, keep
    - Line 345: `opacity: 0.4` → replace with embossed text approach
    - Hardcoded bevel colors (#0a0a0a, #808080, #ffffff, #dfdfdf) in box-shadows throughout: **remove the box-shadows entirely** and replace with border-based bevel approach. Use the Win98 bevel utility classes from win98-bevels.css (e.g., `.win98-raised-deep`, `.win98-sunken-deep`, `.win98-field`) where possible, or inline border properties with CSS variables (var(--win98-ButtonDkShadow), var(--win98-ButtonShadow), var(--win98-ButtonHighlight), var(--win98-ButtonLight)). **No box-shadow properties should remain** — this is a locked user decision ("no box-shadow tricks"). For elements that need the 2px depth effect, use the border + ::before pseudo-element pattern established in win98-bevels.css.

    **Minimap.css:**
    - Line 8: `border-radius: 4px` → delete
    - Line 7: `var(--border-color)` → `var(--border-default)`
    - Line 10: `box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3)` → delete (decorative drop shadow). Replace with Win98 raised border:
      ```css
      border-top: 1px solid var(--win98-ButtonHighlight);
      border-left: 1px solid var(--win98-ButtonHighlight);
      border-right: 1px solid var(--win98-ButtonDkShadow);
      border-bottom: 1px solid var(--win98-ButtonDkShadow);
      ```

    **StatusBar.css:** No specific modern artifacts found, but verify all variable references are valid (--border-subtle, --text-tertiary, --text-secondary are all defined in win98-variables.css).

    **TilesetPanel.css:** No specific modern artifacts found, verify variable references are valid.
  </action>
  <verify>
    Run these searches on the modified files to confirm purge is complete:
    - grep for "border-radius" — should find nothing (or only "border-radius: 0" if kept)
    - grep for "transition" — should find nothing
    - grep for "rgba(" — should find nothing (exception: MapSettingsDialog.css backdrop)
    - grep for "opacity" — should find nothing
    - grep for "filter" — should find nothing
    - grep for "--border-color\|--accent-color" — should find nothing
    - grep for "box-shadow" — should find nothing (all box-shadows replaced with border-based bevels)
    - grep for "transform:" — should find nothing (except functional transforms if any)
  </verify>
  <done>ToolBar, MapCanvas, MapSettingsDialog, Minimap, StatusBar, and TilesetPanel CSS files purged of all modern artifacts, ghost variables replaced, and all box-shadows replaced with border-based bevels.</done>
</task>

<task type="auto">
  <name>Task 2: Purge modern CSS from remaining component files</name>
  <files>
    src/components/AnimationPanel/AnimationPanel.css
    src/components/AnimationPreview/AnimationPreview.css
    src/components/TilePalette/TilePalette.css
    src/components/MapSettingsPanel/MapSettingsPanel.css
    src/components/RightSidebar/RightSidebar.css
    src/components/TabbedBottomPanel/TabbedBottomPanel.css
  </files>
  <action>
    Apply the same systematic purge to remaining component CSS files:

    **AnimationPanel.css:**
    - Line 29: `border-radius: 4px` → delete
    - Line 72: `border-radius: 2px` → delete
    - Line 80: `border-radius: 50%` → delete (slider thumb should be square in Win98)
    - Line 98: `border-radius: 4px` → delete
    - Line 108: `opacity: 0.5` → replace with `color: var(--win98-GrayText); text-shadow: 1px 1px 0 var(--win98-ButtonHighlight);` and `cursor: not-allowed;`

    **AnimationPreview.css:**
    - Line 11: `var(--border-color)` → `var(--border-default)`
    - Line 30: `var(--border-color)` → `var(--border-default)`
    - Line 60: `var(--border-color)` → `var(--border-default)`
    - Line 61: `border-radius: 3px` → delete
    - Line 67: `var(--accent-color)` → `var(--accent-primary)`
    - Line 79: `var(--border-color)` → `var(--border-default)` (background reference)
    - Line 80: `border-radius: 2px` → delete
    - Line 87: `var(--accent-color)` → `var(--accent-primary)`
    - Line 88: `border-radius: 50%` → delete
    - Line 109: `var(--accent-color)` → `var(--accent-primary)`
    - Line 111: `border-radius: 3px` → delete
    - Line 116: `filter: brightness(1.2)` → delete (use `background: var(--bg-hover);` or `background: var(--win98-ButtonLight);` for hover instead)
    - Line 120: `opacity: 0.5` → replace with embossed text approach

    **TilePalette.css:**
    - Line 6: `var(--border-color)` → `var(--border-default)`
    - Line 31: `var(--border-color)` → `var(--border-default)`
    - Line 37: `var(--border-color)` → `var(--border-default)`
    - Line 52: `var(--border-color)` → `var(--border-default)`
    - Line 66: `var(--border-color)` → `var(--border-default)`
    - Line 74: `var(--border-color)` → `var(--border-default)`
    - Line 75: `border-radius: 4px` → delete
    - Line 83: `var(--accent-color)` → `var(--accent-primary)`

    **MapSettingsPanel.css:**
    - Line 93: `border-radius: 2px` → delete
    - Line 102: `border-radius: 50%` → delete (slider thumb → square)
    - Line 118: `border-radius: 4px` → delete
    - Line 150: `border-radius: 4px` → delete
    - Line 165: `border-radius: 4px` → delete
    - Line 182: `border-radius: 4px` → delete

    **RightSidebar.css:**
    - Line 6: `var(--border-color)` → `var(--border-default)`
    - Line 11: `var(--border-color)` → `var(--border-default)`

    **TabbedBottomPanel.css:** No specific modern artifacts found based on grep. Verify all variable references are valid.
  </action>
  <verify>
    Run comprehensive search across ALL src/components/ CSS files:
    - grep for "border-radius" in all component CSS — should find only "border-radius: 0" instances or nothing
    - grep for "transition" in all component CSS — should find nothing
    - grep for "rgba(" in all component CSS — should find nothing (except dialog backdrop)
    - grep for "opacity" in all component CSS — should find nothing
    - grep for "filter" in all component CSS — should find nothing
    - grep for "--border-color\b\|--accent-color\b" in all component CSS — should find nothing
    - grep for "border-radius: 50%" — should find nothing (no round elements in Win98)
    - grep for "box-shadow" in all component CSS — should find nothing (all replaced with border-based bevels)
  </verify>
  <done>All remaining component CSS files purged of modern artifacts. Zero border-radius, zero transitions, zero rgba(), zero opacity on controls, zero filter effects, zero ghost variables, zero box-shadows across entire component CSS codebase.</done>
</task>

</tasks>

<verification>
Comprehensive codebase-wide verification after both tasks:

1. `grep -r "border-radius" src/components/ --include="*.css"` — only "border-radius: 0" or empty results
2. `grep -r "transition" src/components/ --include="*.css"` — empty results
3. `grep -r "rgba(" src/components/ --include="*.css"` — only dialog backdrop exception
4. `grep -r "opacity:" src/components/ --include="*.css"` — empty results
5. `grep -r "filter:" src/components/ --include="*.css"` — empty results
6. `grep -r "\-\-border-color" src/components/ --include="*.css"` — empty results
7. `grep -r "\-\-accent-color" src/components/ --include="*.css"` — empty results
8. `grep -r "border-radius: 50%" src/ --include="*.css"` — empty results (no round elements)
9. `grep -r "box-shadow" src/components/ --include="*.css"` — empty results (all box-shadows replaced with border-based bevels)
</verification>

<success_criteria>
- Zero modern CSS artifacts remain in any component CSS file
- All ghost variables replaced with valid Win98 semantic variables
- Application still renders correctly (no broken styles from missing variables)
- Every control has sharp corners, instant state changes, and solid colors
</success_criteria>

<output>
After completion, create `.planning/phases/12-theme-foundation/12-04-SUMMARY.md`
</output>
