---
phase: 12-theme-foundation
plan: 03
type: execute
wave: 2
depends_on: ["12-01", "12-02"]
files_modified:
  - src/App.css
  - src/main.tsx
autonomous: true

must_haves:
  truths:
    - "App.css imports Win98 foundation CSS files and replaces old variable system"
    - "All dark/light theme variables and classes are removed from App.css"
    - "Body element uses Win98 font family and 11px size"
    - "Canvas area has sunken well treatment"
    - "Old rgba() shadows and modern effects are purged from App.css"
  artifacts:
    - path: "src/App.css"
      provides: "Win98 themed base styles with imported foundation CSS"
      contains: "win98-variables.css"
    - path: "src/main.tsx"
      provides: "CSS import order for Win98 styles"
      contains: "win98"
  key_links:
    - from: "src/App.css"
      to: "src/styles/win98-variables.css"
      via: "@import"
      pattern: "@import.*win98"
    - from: "src/App.css"
      to: "src/styles/win98-bevels.css"
      via: "@import"
      pattern: "@import.*bevels"
---

<objective>
Overhaul App.css to replace the old dark/light variable system with Win98 foundation imports, apply Win98 typography globally, add canvas sunken well treatment, and purge all modern CSS artifacts from App.css.

Purpose: Connect the Win98 CSS foundation (Plan 01) to the application's main stylesheet. After this plan, App.css is the Win98-themed hub that imports foundation files and provides global styles.

Output: Rewritten App.css with Win98 variables, typography, and purged modern effects. Updated main.tsx import order if needed.
</objective>

<execution_context>
@C:\Users\arcje\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\arcje\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-theme-foundation/12-CONTEXT.md
@.planning/phases/12-theme-foundation/12-01-SUMMARY.md

Key existing file:
@src/App.css
@src/main.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace App.css variable system with Win98 foundation imports</name>
  <files>
    src/App.css
    src/main.tsx
  </files>
  <action>
    1. Add CSS imports at the TOP of `src/App.css` (before any rules):
       ```css
       @import './styles/win98-variables.css';
       @import './styles/win98-bevels.css';
       @import './styles/win98-typography.css';
       @import './styles/win98-schemes.css';
       ```
       NOTE: CSS @import must come before all other rules to work correctly. If Vite processes these differently, alternatively import them in main.tsx before App.css. Check if main.tsx currently imports App.css — if so, add the style imports before it in main.tsx instead.

    2. Delete the ENTIRE old variable system from App.css:
       - Delete all Tier 1 primitive color tokens (--color-dark-*, --color-neutral-*, --color-accent-*, --color-cream-*, --color-blue-*)
       - Delete all Tier 2 semantic token assignments in :root (these are now in win98-variables.css)
       - Delete the `.theme-light` class block entirely
       - Keep the :root selector only if it still has non-theme content (like --workspace-bg, though that's now in win98-variables.css too)
       - The ONLY :root content that should remain is anything NOT related to colors/theme

    3. Update the `body` style rule:
       - Remove old font-family (-apple-system, BlinkMacSystemFont, etc.)
       - The Win98 typography CSS handles body font via its own rules, so just ensure no conflicting font-family in App.css body rule
       - Keep: background-color: var(--bg-primary), color: var(--text-primary) — these semantic variables are now defined in win98-variables.css

    4. Purge modern CSS artifacts from App.css:
       - `.win95-frame-inset`: Replace the rgba()-based box-shadow with Win98 bevel border approach. This class provides a sunken frame, so replace with:
         ```css
         .win95-frame-inset {
           border-top: 1px solid var(--win98-ButtonDkShadow);
           border-left: 1px solid var(--win98-ButtonDkShadow);
           border-right: 1px solid var(--win98-ButtonHighlight);
           border-bottom: 1px solid var(--win98-ButtonHighlight);
         }
         ```
       - `.resize-handle-vertical`: Remove `transition: background-color 0.15s ease`. Remove rgba() box-shadow. Replace with solid border colors.
       - `.resize-handle-horizontal`: Remove rgba() box-shadow values. Replace with solid Win98 border approach.
       - Keep `transition: none !important` on panel elements (this ENFORCES no transitions, which is correct for Win98)

    5. Add canvas sunken well treatment:
       - Add or update `.map-canvas-container` in App.css (or if it's in MapCanvas.css, note it for Plan 04):
         The canvas container should get the `.win98-well` treatment from the bevel utilities, or inline the well styling:
         ```css
         .map-canvas-container {
           border-top: 2px solid var(--win98-ButtonDkShadow);
           border-left: 2px solid var(--win98-ButtonDkShadow);
           border-right: 2px solid var(--win98-ButtonHighlight);
           border-bottom: 2px solid var(--win98-ButtonHighlight);
         }
         ```
         Note: .map-canvas-container is defined in MapCanvas.css, so if adding the well treatment there instead, do so. For App.css, focus on global styles. Add the well rule to App.css as a global override if appropriate.

    6. Update `.panel-title-bar` to use CSS variables instead of hardcoded colors:
       - background: linear-gradient(to right, var(--win98-ActiveCaption), var(--win98-GradientActiveCaption))
       - color: var(--win98-CaptionText)
       - font-family can stay as-is (it references MS Sans Serif already)

    7. Update `.collapse-button` and related styles to use Win98 variables instead of semantic variables from old system.
  </action>
  <verify>
    - App.css starts with @import statements for Win98 CSS (or main.tsx imports them)
    - No --color-dark-*, --color-neutral-*, --color-accent-*, --color-cream-*, --color-blue-* variables remain
    - No .theme-light class block remains
    - No rgba() values remain in App.css
    - No transition properties remain (except transition: none !important for panels)
    - grep for "rgba\|theme-light\|color-dark\|color-neutral\|color-cream\|color-blue\|color-accent" in App.css returns nothing
  </verify>
  <done>App.css imports Win98 foundation, old variable system deleted, modern artifacts purged, canvas well treatment applied, title bar uses CSS variables.</done>
</task>

</tasks>

<verification>
1. App.css has @import for all 4 Win98 CSS files (or main.tsx imports them)
2. Zero old theme variables remain in App.css
3. Zero rgba() values in App.css
4. Zero CSS transitions in App.css (except the explicit "none !important" override)
5. Canvas area styled with sunken well border treatment
6. Title bar gradient uses CSS variables for theme-ability
7. Application still renders (no broken variable references)
</verification>

<success_criteria>
- App.css serves as the Win98-themed hub importing foundation CSS
- All old dark/light theme infrastructure removed
- All modern CSS effects (rgba, transitions, decorative shadows) purged from App.css
- Canvas has authentic sunken well appearance
</success_criteria>

<output>
After completion, create `.planning/phases/12-theme-foundation/12-03-SUMMARY.md`
</output>
