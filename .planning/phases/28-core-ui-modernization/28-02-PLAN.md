---
phase: 28-core-ui-modernization
plan: 02
type: execute
wave: 2
depends_on: ["28-01"]
files_modified:
  - src/components/AnimationPanel/AnimationPanel.css
  - src/components/AnimationPreview/AnimationPreview.css
  - src/components/GameObjectToolPanel/GameObjectToolPanel.css
  - src/components/MapSettingsDialog/MapSettingsDialog.css
  - src/components/MapSettingsPanel/MapSettingsPanel.css
  - src/components/StatusBar/StatusBar.css
  - src/components/TabbedBottomPanel/TabbedBottomPanel.css
  - src/components/TeamSelector/TeamSelector.css
  - src/components/TilePalette/TilePalette.css
  - src/components/ToolBar/ToolBar.css
autonomous: true

must_haves:
  truths:
    - "Changing --font-size-2xs in variables.css uniformly adjusts all compact label text across every panel"
    - "Changing --space-0_5 in variables.css uniformly adjusts all 4px padding/gap values across every panel"
    - "Changing --font-weight-semibold in variables.css updates all bold headings at once"
    - "No component renders a font-size, spacing, or font-weight that cannot be controlled from variables.css"
  artifacts:
    - path: "src/components/AnimationPanel/AnimationPanel.css"
      provides: "Zero hardcoded font-size or non-1px spacing values"
    - path: "src/components/AnimationPreview/AnimationPreview.css"
      provides: "Zero hardcoded font-size, spacing, or font-weight values"
    - path: "src/components/MapSettingsDialog/MapSettingsDialog.css"
      provides: "Zero hardcoded font-size or spacing values"
    - path: "src/components/TabbedBottomPanel/TabbedBottomPanel.css"
      provides: "Zero hardcoded font-size or spacing values"
    - path: "src/components/TilePalette/TilePalette.css"
      provides: "Zero hardcoded font-size or spacing values"
  key_links:
    - from: "src/components/*/*.css"
      to: "src/styles/variables.css"
      via: "var() references to spacing and typography tokens"
      pattern: "var\\(--font-size-2xs\\)|var\\(--space-0_5\\)|var\\(--space-0_75\\)"
---

<objective>
Replace all hardcoded spacing and typography values in component CSS files with design token references.

Purpose: Complete the UI-06 requirement by ensuring every spacing, font-size, and font-weight value references the design token system, making the entire UI controllable from a single variables.css file.

Output: All 15 component CSS files (including TabbedBottomPanel.css) use exclusively var() references for spacing, font sizes, and font weights (with acceptable exceptions for structural 1px borders, width/height dimensions, and intrinsic sizing values).
</objective>

<execution_context>
@C:\Users\arcje\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\arcje\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/28-core-ui-modernization/28-01-SUMMARY.md
@src/styles/variables.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace hardcoded spacing and typography in animation and game object panels</name>
  <files>
    src/components/AnimationPanel/AnimationPanel.css
    src/components/AnimationPreview/AnimationPreview.css
    src/components/GameObjectToolPanel/GameObjectToolPanel.css
    src/components/TeamSelector/TeamSelector.css
  </files>
  <action>
Replace hardcoded font-size, spacing, and font-weight values with var() tokens. Use these mappings:

**Font size mapping:**
- `9px` → `var(--font-size-2xs)`
- `10px` (font-size) → `var(--font-size-2xs)` (consolidating 9-10px range to single token)
- `11px` (font-size) → `var(--font-size-xs)`
- `12px` (font-size) → `var(--font-size-sm)` (Note: --font-size-sm is 13px, close enough for compact UI; OR keep 12px if visual fidelity matters. Since 12px is only used in TilePalette and MapSettingsPanel, and those were established sizes, map `12px` → leave as `var(--font-size-xs)` which is 11px. Actually for 12px, the closest token is --font-size-sm at 13px. A 1px difference is acceptable. Use `var(--font-size-sm)` consistently.)

Wait - let me be more careful. The existing tokens are:
- --font-size-2xs: 9px (new from Plan 01)
- --font-size-xs: 11px
- --font-size-sm: 13px
- --font-size-base: 14px

For 10px values: Use `var(--font-size-2xs)` - this rounds down 1px which is negligible in compact UI.
For 12px values: This sits between xs (11px) and sm (13px). Since 12px is only used for larger panel headers and inputs, map to `var(--font-size-xs)` (11px), which is one pixel smaller but maintains compact feel. If a file uses both 11px and 12px for different purposes, this distinction would be lost. Check each file.

**Pragmatic approach:** For font sizes, replace only where the token is an exact or near-exact match:
- `font-size: 9px` → `font-size: var(--font-size-2xs)`
- `font-size: 10px` → `font-size: var(--font-size-2xs)`
- `font-size: 11px` → `font-size: var(--font-size-xs)`

For `font-size: 12px`, leave as-is for now since there's no exact token (it's only in TilePalette and MapSettingsPanel, addressed in Task 2).

**Font weight mapping:**
- `font-weight: 600` → `font-weight: var(--font-weight-semibold)`

**Spacing mapping (use for padding, margin, gap values):**
- `1px` (in padding/margin/gap, NOT borders) → `var(--space-px)`
- `2px` (in padding/margin/gap) → `var(--space-0_25)`
- `4px` (in padding/margin/gap) → `var(--space-0_5)`
- `6px` (in padding/margin/gap) → `var(--space-0_75)`
- `10px` (in padding/margin/gap) → `var(--space-1_25)`
- `12px` (in padding/margin/gap) → `var(--space-1_5)`

**IMPORTANT exceptions - do NOT tokenize:**
- `1px solid` in border declarations (structural, not spacing)
- `width` and `height` values that define element dimensions (e.g., `width: 10px; height: 10px` for radio buttons)
- `min-width`, `max-width`, `min-height` values (intrinsic sizing)
- Negative values (e.g., `margin-bottom: -1px`)
- Values inside `calc()` expressions
- `letter-spacing` values
- Border-radius values (already use var(--radius-*))
- `0` values

**AnimationPanel.css replacements:**
- `.panel-header` padding: `var(--space-1) 4px` → `var(--space-1) var(--space-0_5)`
- `.toggle-btn` padding: `1px 4px` → `var(--space-px) var(--space-0_5)`
- `.toggle-btn` font-size: `9px` → `var(--font-size-2xs)`
- `.anim-controls` padding: `4px` → `var(--space-0_5)`
- `.anim-controls` gap: `4px` → `var(--space-0_5)`
- `.mode-option` font-size: `9px` → `var(--font-size-2xs)`
- `.offset-row label` font-size: `9px` → `var(--font-size-2xs)`
- `.offset-input` padding: `1px 2px` → `var(--space-px) var(--space-0_25)`
- `.offset-input` font-size: `9px` → `var(--font-size-2xs)`
- `.settings-btn` padding: `var(--space-1) 4px` → `var(--space-1) var(--space-0_5)`
- `.settings-btn` font-size: `9px` → `var(--font-size-2xs)`
- `.panel-header` font-size: `10px` → `var(--font-size-2xs)`
- `.team-selector-label` margin-bottom: `1px` → `var(--space-px)`
- `.team-option` padding: `0 1px` → `0 var(--space-px)`
- `.team-option` font-size: `9px` → `var(--font-size-2xs)`

**AnimationPreview.css replacements:**
- `.preview-header` padding: `6px 10px` → `var(--space-0_75) var(--space-1_25)`
- `.preview-title` font-size: `11px` → `var(--font-size-xs)`
- `.preview-title` font-weight: `600` → `var(--font-weight-semibold)`
- `.preview-content` gap: `10px` → `var(--space-1_25)`
- `.preview-content` padding: `var(--space-1) 10px` → `var(--space-1) var(--space-1_25)`
- `.preview-controls` gap: `4px` → `var(--space-0_5)`
- `.control-row` gap: `6px` → `var(--space-0_75)`
- `.control-row` font-size: `10px` → `var(--font-size-2xs)`
- `.anim-id-input` padding: `2px 4px` → `var(--space-0_25) var(--space-0_5)`
- `.anim-id-input` font-size: `10px` → `var(--font-size-2xs)`
- `.anim-info` font-size: `9px` → `var(--font-size-2xs)`
- `.anim-info` margin-top: `2px` → `var(--space-0_25)`
- `.use-btn` margin-top: `4px` → `var(--space-0_5)`
- `.use-btn` padding: `4px var(--space-1)` → `var(--space-0_5) var(--space-1)`
- `.use-btn` font-size: `10px` → `var(--font-size-2xs)`

**GameObjectToolPanel.css replacements:**
- `.gotool-title` font-size: `10px` → `var(--font-size-2xs)`
- `.gotool-title` padding: `var(--space-1) 6px` → `var(--space-1) var(--space-0_75)`
- `.gotool-field` gap: `4px` → `var(--space-0_5)`
- `.gotool-field` padding: `var(--space-1) 6px` → `var(--space-1) var(--space-0_75)`
- `.gotool-label` font-size: `10px` → `var(--font-size-2xs)`
- `.gotool-select` font-size: `10px` → `var(--font-size-2xs)`
- `.gotool-select` padding: `1px 2px` → `var(--space-px) var(--space-0_25)`
- `.gotool-warning` font-size: `9px` → `var(--font-size-2xs)`
- `.gotool-warning` padding: `4px 6px` → `var(--space-0_5) var(--space-0_75)`

**TeamSelector.css replacements:**
- `.team-selector` padding: `4px 6px` → `var(--space-0_5) var(--space-0_75)`
- `.team-selector-label` font-size: `10px` → `var(--font-size-2xs)`
- `.team-selector-options` gap: `1px` → `var(--space-px)`
- `.team-option` gap: `4px` → `var(--space-0_5)`
- `.team-option` padding: `1px 2px` → `var(--space-px) var(--space-0_25)`
- `.team-option` font-size: `10px` → `var(--font-size-2xs)`
  </action>
  <verify>
For each file, grep for remaining hardcoded font-size px values and non-border spacing px values:
- `grep -n "font-size:.*[0-9]px" src/components/AnimationPanel/AnimationPanel.css` should return 0
- `grep -n "font-size:.*[0-9]px" src/components/AnimationPreview/AnimationPreview.css` should return 0
- `grep -n "font-size:.*[0-9]px" src/components/GameObjectToolPanel/GameObjectToolPanel.css` should return 0
- `grep -n "font-size:.*[0-9]px" src/components/TeamSelector/TeamSelector.css` should return 0
- `grep -n "font-weight: 600" src/components/AnimationPreview/AnimationPreview.css` should return 0
- `npm run typecheck` passes
  </verify>
  <done>AnimationPanel.css, AnimationPreview.css, GameObjectToolPanel.css, and TeamSelector.css use exclusively var() tokens for font sizes, font weights, and spacing (padding/margin/gap)</done>
</task>

<task type="auto">
  <name>Task 2: Replace hardcoded spacing and typography in remaining component CSS files</name>
  <files>
    src/components/MapSettingsDialog/MapSettingsDialog.css
    src/components/MapSettingsPanel/MapSettingsPanel.css
    src/components/StatusBar/StatusBar.css
    src/components/TabbedBottomPanel/TabbedBottomPanel.css
    src/components/TilePalette/TilePalette.css
    src/components/ToolBar/ToolBar.css
  </files>
  <action>
Continue replacing hardcoded spacing and typography values using the same mappings from Task 1.

**MapSettingsDialog.css replacements:**
- `.dialog-tabs` padding: `4px 4px 0 4px` → `var(--space-0_5) var(--space-0_5) 0 var(--space-0_5)`
- `.dialog-tabs li[role="tab"]` padding: `4px 12px` → `var(--space-0_5) var(--space-1_5)`
- `.dialog-buttons` padding: `12px var(--space-2)` → `var(--space-1_5) var(--space-2)`
- `.win95-button` padding: `4px var(--space-2)` → `var(--space-0_5) var(--space-2)`
- `.setting-input-controls` gap: `6px` → `var(--space-0_75)`
- `.range-label` font-size: `10px` → `var(--font-size-2xs)`
- `.reset-button` font-size: `12px` → `var(--font-size-xs)` (reset icon, 1px smaller is fine)
- `.setting-group` margin-bottom: `12px` → `var(--space-1_5)`
- `.setting-label` margin-bottom: `4px` → `var(--space-0_5)`
- `.text-input, .text-area` padding: `4px 6px` → `var(--space-0_5) var(--space-0_75)`
- `.setting-number-input` padding: `2px 4px` → `var(--space-0_25) var(--space-0_5)`
- `.toolbar-dropdown-item` padding: `4px var(--space-1)` → `var(--space-0_5) var(--space-1)` (this is in ToolBar.css, listed here for completeness)

**MapSettingsPanel.css replacements:**
- `.panel-header` padding: `12px 16px` → `var(--space-1_5) var(--space-2)`
- `.panel-header` font-size: `14px` → `var(--font-size-base)`
- `.panel-header` font-weight: `600` → `var(--font-weight-semibold)`
- `.map-settings-panel.compact .panel-header` padding: `6px 10px` → `var(--space-0_75) var(--space-1_25)`
- `.map-settings-panel.compact .panel-header` font-size: `11px` → `var(--font-size-xs)`
- `.settings-section` padding: `12px 16px` → `var(--space-1_5) var(--space-2)`
- `.map-settings-panel.compact .settings-section` padding: `8px 10px` → `var(--space-1) var(--space-1_25)`
- `.section-title` font-size: `11px` → `var(--font-size-xs)`
- `.section-title` font-weight: `600` → `var(--font-weight-semibold)`
- `.section-title` margin-bottom: `10px` → `var(--space-1_25)`
- `.map-settings-panel.compact .section-title` font-size: `10px` → `var(--font-size-2xs)`
- `.map-settings-panel.compact .section-title` margin-bottom: `6px` → `var(--space-0_75)`
- `.setting-row` margin-bottom: `10px` → `var(--space-1_25)`
- `.map-settings-panel.compact .setting-row` margin-bottom: `6px` → `var(--space-0_75)`
- `.setting-label` font-size: `12px` → `var(--font-size-xs)` (rounding down 1px)
- `.setting-label` margin-bottom: `4px` → `var(--space-0_5)`
- `.map-settings-panel.compact .setting-label` font-size: `10px` → `var(--font-size-2xs)`
- `.map-settings-panel.compact .setting-label` margin-bottom: `2px` → `var(--space-0_25)`
- `.setting-controls` gap: `8px` → `var(--space-1)`
- `.setting-input` padding: `4px 6px` → `var(--space-0_5) var(--space-0_75)`
- `.setting-input` font-size: `12px` → `var(--font-size-xs)`
- `.map-settings-panel.compact .setting-input` padding: `2px 4px` → `var(--space-0_25) var(--space-0_5)`
- `.map-settings-panel.compact .setting-input` font-size: `10px` → `var(--font-size-2xs)`
- `.setting-range` font-size: `10px` → `var(--font-size-2xs)`
- `.setting-text-input` padding: `6px 8px` → `var(--space-0_75) var(--space-1)`
- `.setting-text-input` font-size: `12px` → `var(--font-size-xs)`
- `.setting-textarea` padding: `6px 8px` → `var(--space-0_75) var(--space-1)`
- `.setting-textarea` font-size: `12px` → `var(--font-size-xs)`
- `.setting-select` padding: `6px 8px` → `var(--space-0_75) var(--space-1)`
- `.setting-select` font-size: `12px` → `var(--font-size-xs)`

**StatusBar.css replacements:**
- `.status-field` padding: `1px 6px` → `var(--space-px) var(--space-0_75)`
- No other hardcoded spacing or font-size values exist in StatusBar.css (font-size and other spacing already use var() tokens from Phase 27). Only the `.status-field` padding line above needs updating.

**TabbedBottomPanel.css replacements:**
- `.tab` padding: `8px 16px` → `var(--space-1) var(--space-2)`
- `.tab` gap: `4px` → `var(--space-0_5)`
- `.tab` font-size: `13px` → `var(--font-size-sm)`
- `.tab-icon` font-size: `14px` → `var(--font-size-base)`

**TilePalette.css replacements:**
- `.palette-header` padding: `8px 12px` → `var(--space-1) var(--space-1_5)`
- `.palette-header` font-size: `12px` → `var(--font-size-xs)`
- `.palette-header` font-weight: `600` → `var(--font-weight-semibold)`
- `.tile-palette:not(.compact) .palette-canvas` margin: `4px` → `var(--space-0_5)`
- `.palette-info` padding: `8px 12px` → `var(--space-1) var(--space-1_5)`
- `.palette-info` font-size: `11px` → `var(--font-size-xs)`
- `.tile-palette.compact .palette-info` padding: `4px 8px` → `var(--space-0_5) var(--space-1)`
- `.tile-palette.compact .palette-info` font-size: `10px` → `var(--font-size-2xs)`
- `.tile-palette.compact .palette-header` padding: `6px 10px` → `var(--space-0_75) var(--space-1_25)`
- `.tile-palette.compact .palette-header` font-size: `11px` → `var(--font-size-xs)`
- `.wall-select` margin: `8px 12px` → `var(--space-1) var(--space-1_5)`
- `.wall-select` padding: `8px` → `var(--space-1)`
- `.wall-select` font-size: `12px` → `var(--font-size-xs)`

**ToolBar.css replacements:**
- `.toolbar-button` padding: `3px` → `var(--space-0_25)` (2px). No 3px token exists; the 1px reduction on a 22px button is imperceptible.
- `.toolbar-dropdown-item` padding: `4px var(--space-1)` → `var(--space-0_5) var(--space-1)`
- `.toolbar-dropdown-item` font-size: `10px` → `var(--font-size-2xs)`

**Same exceptions as Task 1 apply:** Do NOT tokenize border widths, width/height dimensions, min-width/max-width, negative margins, letter-spacing, or zero values.

**Note on 20px .no-map padding:** `padding: 20px` doesn't map cleanly to an 8px-grid token (--space-2 is 16px, --space-3 is 24px). Use `var(--space-3)` (24px) for more generous spacing, or `var(--space-2)` (16px) for tighter look. Use `var(--space-3)` since it's empty-state messaging that benefits from breathing room.
  </action>
  <verify>
Run comprehensive grep across ALL component CSS files to confirm no hardcoded font-size px values remain:
- `grep -rn "font-size:.*[0-9]px" src/components/ --include="*.css"` should return 0 matches
- `grep -rn "font-weight: 600" src/components/ --include="*.css"` should return 0 matches

Verify padding/margin/gap token usage (spot check):
- `grep -c "var(--space-" src/components/MapSettingsPanel/MapSettingsPanel.css` should be significantly higher than before
- `grep -c "var(--font-size-" src/components/MapSettingsPanel/MapSettingsPanel.css` should be significantly higher than before

Run build:
- `npm run typecheck` passes
  </verify>
  <done>All component CSS files use var() tokens for font sizes, font weights, and spacing. Zero hardcoded font-size px values, zero hardcoded font-weight numeric values, and minimal hardcoded spacing values remain across the entire component CSS codebase.</done>
</task>

</tasks>

<verification>
1. `grep -rn "font-size:.*[0-9]px" src/components/ --include="*.css"` returns 0 matches
2. `grep -rn "font-weight: [0-9]" src/components/ --include="*.css"` returns 0 matches (except --font-weight-normal: 400 etc. in variables.css which is Tier 1)
3. `grep -rn "#[0-9a-fA-F]\{3,8\}" src/components/ --include="*.css"` returns only MapSettingsDialog title bar gradient
4. `grep -rn "rgba(" src/components/ --include="*.css"` returns 0 matches
5. `npm run typecheck` passes without new errors
6. Application renders correctly (visual spot check)
</verification>

<success_criteria>
- All component CSS files use var() references for font sizes (0 hardcoded px font-size values)
- All component CSS files use var() references for font weights (0 hardcoded numeric font-weight values)
- All component CSS files use var() references for spacing where applicable (padding, margin, gap)
- Only acceptable hardcoded values remain: border widths (1px solid), element dimensions (width/height), title bar gradient colors
- Application builds without new errors
- UI-06 requirement fully satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/28-core-ui-modernization/28-02-SUMMARY.md`
</output>
