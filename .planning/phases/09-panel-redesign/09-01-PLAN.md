---
phase: 09-panel-redesign
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/App.tsx
  - src/App.css
  - src/components/TilesetPanel/TilesetPanel.tsx
  - src/components/TilesetPanel/TilesetPanel.css
  - src/components/index.ts
autonomous: true

must_haves:
  truths:
    - "Animations panel displays on left side of window"
    - "Tiles panel displays at bottom without tabs"
    - "Canvas occupies center area with maximized space"
    - "All panels have Win95/98 title bars with blue gradient"
    - "Panel dividers are resizable"
  artifacts:
    - path: "src/App.tsx"
      provides: "Nested PanelGroup layout structure"
      contains: "PanelGroup direction=\"horizontal\""
    - path: "src/components/TilesetPanel/TilesetPanel.tsx"
      provides: "Tiles-only panel with Win95 title bar"
      exports: ["TilesetPanel"]
    - path: "src/App.css"
      provides: "Win95 panel styling"
      contains: ".panel-title-bar"
  key_links:
    - from: "src/App.tsx"
      to: "AnimationPanel"
      via: "nested in left Panel"
      pattern: "Panel.*AnimationPanel"
    - from: "src/App.tsx"
      to: "TilesetPanel"
      via: "nested in bottom Panel"
      pattern: "Panel.*TilesetPanel"
---

<objective>
Restructure application layout from tabbed bottom panel to SEdit-style multi-panel layout with animations on left and tiles at bottom.

Purpose: Maximize canvas space while providing always-visible tool panels. This is the foundation for Phase 9's panel redesign.
Output: Working nested panel layout with Win95/98 styling.
</objective>

<execution_context>
@C:\Users\arcje\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\arcje\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/09-panel-redesign/09-CONTEXT.md
@.planning/phases/09-panel-redesign/09-RESEARCH.md
@src/App.tsx
@src/App.css
@src/components/TabbedBottomPanel/TabbedBottomPanel.tsx
@src/components/TilePalette/TilePalette.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TilesetPanel component</name>
  <files>
    src/components/TilesetPanel/TilesetPanel.tsx
    src/components/TilesetPanel/TilesetPanel.css
    src/components/index.ts
  </files>
  <action>
Create new TilesetPanel component that wraps TilePalette with Win95/98 styling:

1. Create `src/components/TilesetPanel/TilesetPanel.tsx`:
   - Import TilePalette from existing component
   - Wrap in container div with className "tileset-panel"
   - Add Win95 title bar div with text "Tileset" (className "panel-title-bar")
   - Pass tilesetImage prop to TilePalette
   - Remove showRowLabels prop (we want compact tileset view)

2. Create `src/components/TilesetPanel/TilesetPanel.css`:
   - `.tileset-panel`: flex column, height 100%, background var(--bg-primary)
   - `.panel-title-bar`: Win98 gradient background (linear-gradient to right, #000080 to #1084d0), white text, bold, 11px font, padding 2px 4px, min-height 18px
   - `.tileset-panel-body`: flex 1, overflow hidden (TilePalette handles its own scrolling)

3. Update `src/components/index.ts`:
   - Add export for TilesetPanel

Note: TabbedBottomPanel will be deleted after layout migration is complete, but keep it for now as fallback reference.
  </action>
  <verify>
    - File exists: `src/components/TilesetPanel/TilesetPanel.tsx`
    - File exists: `src/components/TilesetPanel/TilesetPanel.css`
    - TypeScript compiles: `npm run typecheck`
  </verify>
  <done>TilesetPanel component exists with Win95 title bar wrapping TilePalette</done>
</task>

<task type="auto">
  <name>Task 2: Restructure App.tsx with nested PanelGroups</name>
  <files>
    src/App.tsx
    src/App.css
  </files>
  <action>
Refactor App.tsx to use nested PanelGroup layout:

1. Update imports in App.tsx:
   - Remove TabbedBottomPanel import
   - Add TilesetPanel import
   - Keep AnimationPanel import (already exists via components index)

2. Replace current vertical PanelGroup structure with nested layout:
```tsx
<PanelGroup direction="horizontal" className="app-content">
  {/* Left: Animation Panel */}
  <Panel id="animations" defaultSize={18} minSize={12} maxSize={30}>
    <div className="animation-panel-container">
      <div className="panel-title-bar">Animations</div>
      <AnimationPanel tilesetImage={tilesetImage} />
    </div>
  </Panel>

  <PanelResizeHandle className="resize-handle-vertical" />

  {/* Main area: Canvas + Tiles */}
  <Panel id="main" defaultSize={82}>
    <PanelGroup direction="vertical">
      <Panel id="canvas" defaultSize={75} minSize={40}>
        <div className="main-area">
          <MapCanvas tilesetImage={tilesetImage} onCursorMove={handleCursorMove} />
          <Minimap tilesetImage={tilesetImage} />
        </div>
      </Panel>

      <PanelResizeHandle className="resize-handle-horizontal" />

      <Panel id="tiles" defaultSize={25} minSize={10} maxSize={50}>
        <TilesetPanel tilesetImage={tilesetImage} />
      </Panel>
    </PanelGroup>
  </Panel>
</PanelGroup>
```

3. Remove collapse button and collapse state (no longer needed - panels always visible):
   - Remove bottomPanelRef
   - Remove isCollapsed state
   - Remove handleToggleCollapse
   - Remove handleBottomLayoutChange
   - Remove collapse-button from resize handle

4. Update App.css:
   - Add `.animation-panel-container` styling (flex column, height 100%, background var(--bg-primary))
   - Ensure `.panel-title-bar` styling is defined (move from TilesetPanel.css if needed, use in both places)
   - Keep existing resize handle styles

Note: Do NOT delete TabbedBottomPanel component files yet - they serve as reference for potential rollback.
  </action>
  <verify>
    - App compiles: `npm run typecheck`
    - Layout renders: `npm run electron:dev` shows animations left, canvas center, tiles bottom
    - Panels resize: Dragging dividers adjusts panel sizes
  </verify>
  <done>App uses nested PanelGroup with animations left, canvas center, tiles bottom</done>
</task>

<task type="auto">
  <name>Task 3: Add Win95/98 panel styling</name>
  <files>
    src/App.css
    src/components/AnimationPanel/AnimationPanel.css
  </files>
  <action>
Add consistent Win95/98 styling to all panels:

1. In App.css, add/update panel title bar styling:
```css
/* Win95/98 Panel Title Bar */
.panel-title-bar {
  background: linear-gradient(to right, #000080, #1084d0);
  color: #ffffff;
  padding: 2px 8px;
  font-size: 11px;
  font-weight: bold;
  font-family: 'MS Sans Serif', Arial, sans-serif;
  min-height: 18px;
  display: flex;
  align-items: center;
  user-select: none;
}

/* Animation panel container */
.animation-panel-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--bg-primary);
}
```

2. In AnimationPanel.css, update to work with new container:
   - Remove any existing header styling (will use shared panel-title-bar)
   - Ensure `.animation-panel` fills remaining space (flex: 1)
   - Remove duplicate header/title styling

3. Ensure resize handles have proper Win95 styling (already exists but verify):
   - Horizontal: 6px height, beveled appearance
   - Vertical: 4px width (or 2px current), beveled appearance
  </action>
  <verify>
    - Visual check: Title bars have blue gradient
    - Visual check: Both "Animations" and "Tileset" panels have matching title bars
    - Visual check: Resize handles have subtle 3D appearance
  </verify>
  <done>All panels have consistent Win95/98 title bar styling</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Layout structure:
   - Run `npm run electron:dev`
   - Confirm: Animation panel on left side
   - Confirm: Map canvas in center (largest area)
   - Confirm: Tileset panel at bottom
   - Confirm: Minimap in top-right of canvas area

2. Panel resizing:
   - Drag left divider: Animation panel width changes
   - Drag bottom divider: Tileset panel height changes
   - Both canvas and tileset respond to resize

3. Win95 styling:
   - Both panels have blue gradient title bars
   - Title text is white and bold
   - Resize handles have beveled appearance

4. Functionality preserved:
   - Can select tiles from tileset
   - Can place tiles on map
   - Can scroll tileset
   - Minimap navigation works
</verification>

<success_criteria>
- Nested PanelGroup layout implemented (horizontal outer, vertical inner)
- Animation panel displays on left with Win95 title bar
- Tileset panel displays at bottom with Win95 title bar (no tabs)
- Canvas area maximized as primary workspace
- All panel resizing works correctly
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/09-panel-redesign/09-01-SUMMARY.md`
</output>
